(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{163:function(e,t,a){e.exports=a.p+"static/media/empty.bcf83b8f.webp"},184:function(e,t,a){e.exports=a(303)},302:function(e,t,a){},303:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"setTokenHeader",(function(){return z})),a.d(n,"login",(function(){return X})),a.d(n,"register",(function(){return U})),a.d(n,"getProfile",(function(){return J})),a.d(n,"getAllCategories",(function(){return $})),a.d(n,"getAllCategoriesDetailed",(function(){return q})),a.d(n,"createCategory",(function(){return K})),a.d(n,"updateCategory",(function(){return Q})),a.d(n,"deleteCategory",(function(){return Z})),a.d(n,"getAllActivities",(function(){return ee})),a.d(n,"getAllActivitiesDetailed",(function(){return te})),a.d(n,"getActivity",(function(){return ae})),a.d(n,"createActivity",(function(){return ne})),a.d(n,"updateActivity",(function(){return re})),a.d(n,"deleteActivity",(function(){return ie})),a.d(n,"getAllPerformedActivities",(function(){return oe})),a.d(n,"getAllPerformedActivitiesByDate",(function(){return ce})),a.d(n,"getPerformedActivitiesByDate",(function(){return le})),a.d(n,"createPerformedActivity",(function(){return ue})),a.d(n,"updatePerformedActivity",(function(){return se})),a.d(n,"deletePerformedActivity",(function(){return me})),a.d(n,"getAllTags",(function(){return de})),a.d(n,"createTag",(function(){return fe})),a.d(n,"updateTag",(function(){return pe})),a.d(n,"deleteTag",(function(){return ge})),a.d(n,"getAllShortcuts",(function(){return ve})),a.d(n,"createShortcut",(function(){return be})),a.d(n,"deleteShortcut",(function(){return Ee})),a.d(n,"getAnalysisByDate",(function(){return he}));var r=a(0),i=a.n(r),o=a(12),c=a.n(o),l=a(24),u=a(164),s=a(356),m=a(27),d=a(147),f=a(18),p=a.n(f),g=a(36),v=a(60),b=a(13),E=a(17),h=a.n(E),y=a(54);function O(e){return p()(e).utcOffset(120)}function j(e){return e.map((function(e){return function(e){return e.finished_at=O(e.finished_at),e}(e)}))}function w(e){return e.map((function(e){return function(e){return e.icon=y[e.icon],e}(e)}))}function x(e){var t;return"ACTIVITY_DETAILED"===e?t=function(e){return t=e.data,Object.keys(t.durations).forEach((function(e){var a,n,r,i=p()(e,"YYYY-MM-DD").format("DD.MM.YYYY");a=t.durations,(n=e)!==(r=i)&&(a[r]=a[n],delete a[n])})),t;var t}:"PERFORMED_ACTIVITIES"===e?t=function(e){return j(e.data)}:"PERFORMED_ACTIVITIES_BY_DATE"===e?t=function(e){return Object.values(e.data).map(j)}:"SHORTCUTS"===e?t=function(e){return w(e.data)}:"ANALYSIS"===e&&(t=function(e){return function(e){return e.time_awake=O(e.time_awake),["activities","categories"].forEach((function(t){e[t].forEach((function(e){e.total_duration_for_date&&(e.total_duration_for_date=O(e.total_duration_for_date))})),e[t].sort((function(e,t){return(t.total_duration_for_date||0)-(e.total_duration_for_date||0)}))})),e}(e.data)}),function(e){return new Promise((function(a){t(e),a(e)}))}}var C=a(149),S=a.n(C),k=a(150),N=a.n(k),_=a(151),A=a.n(_),D=a(152),M=a.n(D),I=a(154),T=a.n(I),Y=a(155),R=a.n(Y),P=a(156),L=a.n(P),V=a(153),F=a.n(V),B=window.location.origin+"/api",W=[[{title:"Profile",to:"/profile",icon:S.a},{title:"Logout",to:"/logout",icon:N.a}],[{title:"Today",to:"/today",icon:A.a},{title:"All Time",to:"/all-time",icon:M.a},{title:"Analysis",to:"/analysis/"+p()().format("YYYY-MM-DD"),icon:F.a}],[{title:"Activities",to:"/activities",icon:T.a},{title:"Categories",to:"/categories",icon:R.a},{title:"Tags",to:"/tags",icon:L.a}]],H=["#1976D2","#388E3C","#FFA000","#7B1FA2","#D32F2F","#303F9F","#E64A19"];function z(e){h.a.defaults.headers.common={Authorization:"Baerer "+e}}function G(e){return B+e}var X=function(e){return h.a.post(G("/auth/login"),e)},U=function(e){return h.a.post(G("/auth/register"),e)},J=function(){return h.a.get(G("/auth"))},$=function(){return h.a.get(G("/categories"))},q=function(){return h.a.get(G("/categories?details=true"))},K=function(e){return h.a.post(G("/categories"),e)},Q=function(e){return h.a.put(G("/categories"),e)},Z=function(e){return h.a.delete(G("/categories"),{data:e})},ee=function(){return h.a.get(G("/activities"))},te=function(){return h.a.get(G("/activities?details=true"))},ae=function(e){return h.a.get(G("/activities/"+e)).then(x("ACTIVITY_DETAILED"))},ne=function(e){return h.a.post(G("/activities"),e)},re=function(e){return h.a.put(G("/activities"),e)},ie=function(e){return h.a.delete(G("/activities"),{data:e})},oe=function(){return h.a.get(G("/performed-activities")).then(x("PERFORMED_ACTIVITIES"))},ce=function(){return h.a.get(G("/performed-activities/date")).then(x("PERFORMED_ACTIVITIES_BY_DATE"))},le=function(e){return h.a.get(G("/performed-activities/date?date=".concat(e.date))).then(x("PERFORMED_ACTIVITIES"))},ue=function(e){return h.a.post(G("/performed-activities"),e)},se=function(e){return h.a.put(G("/performed-activities"),e)},me=function(e){return h.a.delete(G("/performed-activities"),{data:e})},de=function(){return h.a.get(G("/tags"))},fe=function(e){return h.a.post(G("/tags"),e)},pe=function(e){return h.a.put(G("/tags"),e)},ge=function(e){return h.a.delete(G("/tags"),{data:e})},ve=function(){return h.a.get(G("/shortcuts")).then(x("SHORTCUTS"))},be=function(e){return h.a.post(G("/shortcuts"),e)},Ee=function(e){return h.a.delete(G("/shortcuts"),{data:e})},he=function(e){return h.a.get(G("/analysis/"+e)).then(x("ANALYSIS"))},ye={token:localStorage.getItem("token"),user:null,isLoggedIn:!1};z(localStorage.getItem("token"));var Oe,je,we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return localStorage.setItem("token",t.token),z(t.token),Object(b.a)(Object(b.a)({},e),{},{token:t.token,user:t.user,isLoggedIn:!0});case"LOGOUT":return localStorage.removeItem("token"),z(null),Object(b.a)(Object(b.a)({},ye),{},{token:null});default:return e}},xe=Object(v.b)({auth:we}),Ce=Object(v.c)(xe,null===(Oe=(je=window).__REDUX_DEVTOOLS_EXTENSION__)||void 0===Oe?void 0:Oe.call(je)),Se=a(355),ke=a(53),Ne=a(22),_e=a(7),Ae=a(304),De=a(347),Me=a(336),Ie=a(63),Te=a.n(Ie),Ye=a(93),Re=a.n(Ye),Pe=a(337),Le=a(338),Ve=a(69),Fe=a(157),Be=a.n(Fe),We=Object(Me.a)((function(e){return{appBar:{backgroundColor:e.palette.background.default,boxShadow:"none"},title:{flexGrow:1,fontWeight:"medium",marginLeft:20}}}));var He=function(e){var t=e.title,a=e.Subtitle,n=e.onMenuClick,r=Object(l.c)((function(e){return e.auth.isLoggedIn})),o=We();return r?i.a.createElement(Pe.a,{className:o.appBar,position:"static"},i.a.createElement(Le.a,null,i.a.createElement(Ae.a,{edge:"start",onClick:n},i.a.createElement(Be.a,null)),i.a.createElement(Ve.a,{variant:"h6",className:o.title,color:"textPrimary"},t),a&&i.a.createElement(a,null))):null},ze=a(362),Ge=a(339),Xe=a(340),Ue=a(341),Je=a(342),$e=a(343),qe=Object(Me.a)((function(e){return{innerDrawer:{width:256},head:{padding:e.spacing(2),paddingBottom:0}}}));var Ke=function(e){var t=e.open,a=(e.onOpen,e.onClose),n=Object(Ne.g)(),r=Object(l.c)((function(e){var t;return null===(t=e.auth.user)||void 0===t?void 0:t.email})),o=qe();return i.a.createElement(ze.a,{open:t,onClose:a,anchor:"left",PaperProps:{className:o.innerDrawer}},i.a.createElement("div",{className:o.head},i.a.createElement(Ve.a,{variant:"subtitle1"},r)),W.map((function(e,t){return i.a.createElement(i.a.Fragment,{key:t},i.a.createElement(Ge.a,null,e.map((function(e,t){return i.a.createElement(Xe.a,{button:!0,onClick:function(){return t=e.to,a(),void n.push(t);var t},key:t},i.a.createElement(Ue.a,null,i.a.createElement(e.icon)),i.a.createElement(Je.a,null,e.title))}))),t<W.length-1&&i.a.createElement($e.a,null))})))},Qe=Object(Me.a)((function(e){return{main:{margin:function(t){return"0 ".concat(e.spacing(2),"px ").concat(e.spacing(4),"px")}}}}));var Ze=function(e){var t=e.children,a=e.HeaderProps,n=void 0===a?{}:a,o=Object(l.c)((function(e){return e.auth.isLoggedIn})),c=Qe({isLoggedIn:o}),u=Object(r.useState)(!1),s=Object(_e.a)(u,2),m=s[0],d=s[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement(He,Object.assign({onMenuClick:function(){return d(!0)}},n)),i.a.createElement(Ke,{open:m,onClose:function(){return d(!1)}}),i.a.createElement("div",{className:c.main},t))},et=a(23),tt=a.n(et),at=a(38),nt=a(3),rt=a(28),it=a(358),ot=a(345),ct=a(359);function lt(e){return{type:"LOGIN",token:e.token,user:e.user}}var ut=Object(Me.a)((function(e){return{spacing:{marginBottom:e.spacing(4)},title:{textAlign:"center",fontWeight:500,letterSpacing:2}}}));var st=function(e){var t,a,n=e.className,o=ut(),c=Object(l.b)(),u=Object(rt.b)(),s=u.register,m=u.handleSubmit,d=u.setError,f=u.errors,p=Object(r.useState)(!1),g=Object(_e.a)(p,2),v=g[0],b=g[1],E=function(){var e=Object(at.a)(tt.a.mark((function e(t){return tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.email&&t.password){e.next=2;break}return e.abrupt("return");case 2:X(t).then((function(e){c(lt(e.data))})).catch((function(e){404===e.response.status?d("email",{message:"Email Not found"}):401===e.response.status?d("password",{message:"Wrong password"}):b(!0)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement("div",{className:n},i.a.createElement(Ve.a,{variant:"h5",color:"textPrimary",className:Object(nt.a)(o.spacing,o.title)},"LOGIN"),i.a.createElement("form",{noValidate:!0,onSubmit:m(E),className:o.spacing},i.a.createElement(it.a,{variant:"outlined",label:"Email",name:"email",type:"email",inputRef:s(),className:o.spacing,fullWidth:!0,error:!!f.email,helperText:null===(t=f.email)||void 0===t?void 0:t.message}),i.a.createElement(it.a,{variant:"outlined",label:"Password",name:"password",type:"password",inputRef:s(),className:o.spacing,fullWidth:!0,error:!!f.password,helperText:null===(a=f.password)||void 0===a?void 0:a.message}),i.a.createElement(ot.a,{variant:"outlined",color:"primary",fullWidth:!0,type:"submit"},"Login")),v&&i.a.createElement(ct.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:v,autoHideDuration:3e3,onClose:function(){return b(!1)},message:"Login failed",action:i.a.createElement(Ae.a,{onClick:function(){return b(!1)},color:"secondary"},i.a.createElement(Te.a,null))}))},mt=Object(Me.a)((function(e){return{spacing:{marginBottom:e.spacing(4)},title:{textAlign:"center",fontWeight:500,letterSpacing:2},alternateTitle:{textAlign:"center",fontWeight:"lighter"}}}));var dt=function(e){var t,a,n=e.className,o=mt(),c=Object(l.b)(),u=Object(rt.b)(),s=u.register,m=u.handleSubmit,d=u.setError,f=u.errors,p=Object(r.useState)(!1),g=Object(_e.a)(p,2),v=g[0],b=g[1],E=function(){var e=Object(at.a)(tt.a.mark((function e(t){return tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.email&&t.password){e.next=2;break}return e.abrupt("return");case 2:if(t.password===t.confirm_password){e.next=5;break}return d("confirm_password",{message:"Passwords do not match"}),e.abrupt("return");case 5:U(t).then((function(e){c(lt(e.data))})).catch((function(e){409===e.response.status?d("email",{message:"Email is already taken"}):b(!0)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement("div",{className:n},i.a.createElement(Ve.a,{variant:"h5",color:"textPrimary",className:Object(nt.a)(o.spacing,o.title)},"REGISTER"),i.a.createElement("form",{noValidate:!0,onSubmit:m(E),className:o.spacing},i.a.createElement(it.a,{variant:"outlined",label:"Email",name:"email",type:"email",inputRef:s(),className:o.spacing,fullWidth:!0,error:!!f.email,helperText:null===(t=f.email)||void 0===t?void 0:t.message}),i.a.createElement(it.a,{variant:"outlined",label:"Password",name:"password",type:"password",inputRef:s(),className:o.spacing,fullWidth:!0}),i.a.createElement(it.a,{variant:"outlined",label:"Confirm Password",name:"confirm_password",type:"password",inputRef:s(),className:o.spacing,fullWidth:!0,error:!!f.confirm_password,helperText:null===(a=f.confirm_password)||void 0===a?void 0:a.message}),i.a.createElement(ot.a,{variant:"outlined",color:"primary",fullWidth:!0,type:"submit"},"Register")),v&&i.a.createElement(ct.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:v,autoHideDuration:3e3,onClose:function(){return b(!1)},message:"Registration failed",action:i.a.createElement(Ae.a,{onClick:function(){return b(!1)}},i.a.createElement(Te.a,null))}))},ft=a(346),pt=Object(Me.a)((function(e){return{container:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center"}}}));var gt=function(){var e=pt();return i.a.createElement("div",{className:e.container},i.a.createElement(ft.a,null))},vt=Object(Me.a)((function(e){return{container:{height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",paddingBottom:e.spacing(4)+48},form:{padding:"0 ".concat(e.spacing(2),"px")},fab:{position:"fixed",bottom:e.spacing(4),right:e.spacing(2),"& .MuiFab-label":{display:"flex",alignItems:"center","& svg":{marginRight:e.spacing(1)}}},close:{position:"absolute",top:e.spacing(4)-12,left:e.spacing(4)-12}}}));var bt=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.auth.isLoggedIn})),a=Object(l.c)((function(e){return e.auth.token})),n=a&&!t,o=Object(r.useState)(!1),c=Object(_e.a)(o,2),u=c[0],s=c[1],m=Object(r.useState)(n),d=Object(_e.a)(m,2),f=d[0],p=d[1],g=vt({showRegisterForm:u});return Object(r.useEffect)((function(){n&&J().then((function(t){return e(lt({user:t.data,token:a}))})).catch((function(){return localStorage.removeItem("token")})).finally((function(){return p(!1)}))})),i.a.createElement(Ze,null,i.a.createElement("div",{className:g.container,style:{paddingBottom:u&&"0"}},f?i.a.createElement(gt,null):u?i.a.createElement(i.a.Fragment,null,i.a.createElement(Ae.a,{onClick:function(){return s(!1)},className:g.close},i.a.createElement(Te.a,null)),i.a.createElement(dt,{className:g.form})):i.a.createElement(i.a.Fragment,null,i.a.createElement(st,{className:g.form}),i.a.createElement(De.a,{variant:"extended",color:"secondary",className:g.fab,onClick:function(){return s(!0)}},i.a.createElement(Re.a,null),"Register"))))};var Et=function(){var e=Object(l.b)(),t=Object(Ne.g)();return Object(r.useEffect)((function(){e({type:"LOGOUT"}),t.push("/")}),[e,t]),i.a.createElement(Ze,{HeaderProps:{title:"Logout"}})},ht=a(357),yt=a(363),Ot=a(349),jt=a(350),wt=a(351),xt=a(348),Ct=a(111);var St=function(e){var t="string"===typeof e?n[e]:n[e.method].bind(null,e.data);if(!t)throw new Error("API Method "+(e.method||e)+" not found");var a=Object(r.useState)(!e.defaultValue),i=Object(_e.a)(a,2),o=i[0],c=i[1],l=Object(r.useState)(e.defaultValue),u=Object(_e.a)(l,2),s=u[0],m=u[1],d=Object(r.useState)(),f=Object(_e.a)(d,2),p=f[0],g=f[1],v=Object(r.useReducer)((function(e){return e+1}),0),b=Object(_e.a)(v,2),E=b[0],h=b[1];return Object(r.useEffect)((function(){e.defaultValue&&0===E||(c(!0),t().then((function(t){m(t.data),g(null),c(!1),e.onLoad&&e.onLoad(t.data)})).catch((function(e){m(null),g(e),c(!1)})))}),[E]),{isLoading:o,data:s,error:p,reload:h}},kt=Object(Me.a)((function(e){return{container:{marginBottom:e.spacing(2)},divider:{margin:"0 ".concat(e.spacing(2),"px")}}}));var Nt=function(e){var t=e.filter,a=void 0===t?"":t,n=e.style,r=e.onClick,o=kt(),c=St("getAllActivities"),l=c.isLoading,u=c.data;if(l)return i.a.createElement(gt,null);var s=u.filter((function(e){return e.name.toLowerCase().startsWith(a.toLowerCase())}));return i.a.createElement(Ct.a,{elevation:3,className:o.container,style:n},s.length>0?i.a.createElement(Ge.a,null,s.map((function(e,t){return i.a.createElement(i.a.Fragment,{key:e.id},i.a.createElement(Xe.a,{button:!0,onClick:function(){return r(e)}},i.a.createElement(Je.a,null,e.name)),t<s.length-1&&i.a.createElement($e.a,{className:o.divider}))}))):i.a.createElement(Ge.a,null,i.a.createElement(Xe.a,null,i.a.createElement(Je.a,null,"No activities found"))))},_t=Object(Me.a)((function(e){return{form:{marginBottom:e.spacing(2)},input:{margin:"".concat(e.spacing(1),"px 0"),"&:first-child":{marginTop:0}},submitButton:{margin:"8px 0 16px 0"}}}));var At=function(e){var t=e.onSubmit,a=_t(),n=Object(rt.b)(),o=n.register,c=n.watch,l=n.reset,u=n.getValues,s=n.setValue,m=Object(r.useState)(),d=Object(_e.a)(m,2),f=d[0],p=d[1];return i.a.createElement("form",{noValidate:!0,className:a.form},i.a.createElement(it.a,{variant:"outlined",label:"Activity",name:"activity_name",inputRef:o(),className:a.input,fullWidth:!0,autoComplete:"off"}),i.a.createElement(Nt,{filter:c("activity_name"),style:{display:!c("activity_name")&&"none"},onClick:function(e){p(e),s("activity_name",e.name)}}),i.a.createElement(it.a,{variant:"outlined",label:"Icon",name:"icon",inputRef:o(),className:a.input,fullWidth:!0,autoComplete:"off",InputProps:c("icon")&&y[c("icon")]?{endAdornment:i.a.createElement(xt.a,{position:"end"},i.a.createElement(y[c("icon")]))}:{}}),i.a.createElement(ot.a,{href:"https://material-ui.com/components/material-icons/",target:"_blank"},"View available icons"),i.a.createElement(ot.a,{variant:"outlined",color:"primary",fullWidth:!0,onClick:function(){f&&t({icon:u("icon"),activity_id:f.id}).then(l)},className:a.submitButton},"Add"))};var Dt=function(e){var t=e.open,a=e.onClose;return i.a.createElement(Ot.a,{open:t,onClose:a},i.a.createElement(jt.a,null,"Create Shortcut"),i.a.createElement(wt.a,null,i.a.createElement(At,{onSubmit:function(e){return new Promise((function(t){be(e).then((function(){t(),a()})).catch((function(e){return console.error(e)}))}))}})))},Mt=Object(Me.a)((function(e){return{container:{marginBottom:e.spacing(2),overflowX:"scroll",display:"flex"},chip:{backgroundColor:"#4B4B57",marginRight:e.spacing(2)}}}));var It=function(e){var t=e.onClick,a=Mt(),n=St("getAllShortcuts"),o=n.isLoading,c=n.data,l=n.reload,u=Object(r.useState)(!1),s=Object(_e.a)(u,2),m=s[0],d=s[1];return o?i.a.createElement(gt,null):i.a.createElement("div",{className:a.container},c.map((function(e){return i.a.createElement(yt.a,{icon:e.icon&&i.a.createElement(e.icon),label:e.activity.name,onClick:function(){return t(e.activity)},onDelete:function(){return function(e){Ee(e).then(l).catch((function(e){return console.error(e)}))}(e)},className:a.chip,clickable:!0,key:e.id})})),i.a.createElement(yt.a,{icon:i.a.createElement(Re.a,null),label:"Add Shortcut",onClick:function(){d(!0)},className:a.chip,clickable:!0}),i.a.createElement(Dt,{open:m,onClose:function(){d(!1),l()}}))};function Tt(e){e.preventDefault()}var Yt={passive:!1};function Rt(e){return e.touches?{x:e.touches[0].clientX,y:e.touches[0].clientY}:{x:e.clientX,y:e.clientY}}function Pt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Math.floor(e/1e3/3600*Math.pow(10,t))/Math.pow(10,t)}var Lt=Object(Me.a)((function(e){return{title:{opacity:.87},primaryInputs:{display:"flex",marginBottom:e.spacing(2)},input:{margin:"".concat(e.spacing(1),"px 0")},timeDisplay:{width:e.spacing(8),marginLeft:e.spacing(1),display:"flex",justifyContent:"center",alignItems:"center",fontSize:20},submitButton:{margin:"8px 0 16px 0"}}}));function Vt(){return function(e,t){var a=60*t*1e3;return p()(Math.round(+e/a)*a)}(p()(),5)}var Ft=function(e){var t=e.onSubmit,a=e.defaultValues,n=e.title,o=void 0===n||n,c=e.submitButton,l=void 0!==c&&c,u=Lt(),s=Object(rt.b)({defaultValues:Object(b.a)({finished_at:Vt()},a)}),m=s.register,d=s.control,f=s.watch,p=s.reset,g=s.getValues,v=s.setValue,E=s.formState,h=Object(r.useState)(!1),y=Object(_e.a)(h,2),O=y[0],j=y[1],w=function(e){var n=g("finished_at").format("YYYY-MM-DD HH:mm");t({activity_id:(null===e||void 0===e?void 0:e.id)||a.activity_id,finished_at:n}).then(p)};return Object(r.useEffect)((function(){var e=setInterval((function(){"finished_at"in E.dirtyFields||v("finished_at",Vt())}),1e3);return function(){return clearInterval(e)}})),i.a.createElement(i.a.Fragment,null,o&&i.a.createElement(Ve.a,{variant:"subtitle1",className:u.title},"Register Activity"),i.a.createElement("form",{noValidate:!0},i.a.createElement("div",{className:u.primaryInputs},i.a.createElement(it.a,{variant:"outlined",label:"Activity",name:"activity_name",inputRef:m(),className:u.input,fullWidth:!0,autoComplete:"off"}),i.a.createElement("div",{className:u.timeDisplay,onClick:function(){return j(!0)}},f("finished_at").format("HH:mm")),i.a.createElement(rt.a,{control:d,name:"finished_at",render:function(e){var t=e.onChange,a=e.value;return i.a.createElement(ht.a,{value:a,open:O,onOpen:function(){return j(!0)},onClose:function(){return j(!1)},onChange:t,ampm:!1,style:{display:"none"}})}})),i.a.createElement(Nt,{filter:f("activity_name"),style:{display:!f("activity_name")&&"none"},onClick:w}),i.a.createElement(It,{onClick:w}),l&&i.a.createElement(ot.a,{variant:"outlined",color:"primary",fullWidth:!0,onClick:w,className:u.submitButton},"Save")))},Bt=a(110),Wt=a(33),Ht=a(158),zt=a.n(Ht),Gt=a(159),Xt=a.n(Gt);var Ut=function(e){var t=e.children,a=e.onDragStart,n=void 0===a?function(){}:a,o=e.onDrag,c=void 0===o?function(){}:o,l=e.onDragStop,u=void 0===l?function(){}:l,s=Object(r.useRef)(),m=Object(r.useState)(!1),d=Object(_e.a)(m,2),f=d[0],p=d[1],g=Object(r.useState)(!1),v=Object(_e.a)(g,2),b=v[0],E=v[1],h=function(e){var t=Rt(e);s.current=t,n(t),p(!0)},y=function(e){if(!b){var t=Rt(e);if(t.deltaX=t.x-s.current.x,t.deltaY=t.y-s.current.y,f){if(Math.abs(t.deltaY)>=Math.abs(t.deltaX))return void E(!0);window.addEventListener("touchmove",Tt,Yt),p(!1)}c(t),s.current=t}},O=function(){window.removeEventListener("touchmove",Tt,Yt),b&&E(!1),u()};return i.a.cloneElement(i.a.Children.only(t),{onMouseDown:h,onMouseMove:y,onMouseUp:O,onTouchStart:h,onTouchMove:y,onTouchEnd:O})},Jt=Object(Me.a)((function(e){return{container:{display:"flex",alignItems:"center"},icon:{position:"absolute",color:"#000"}}}));var $t=function(e){var t=e.children,a=e.swipeLeftConfig,n=e.swipeRightConfig,o=e.onSwipeRight,c=e.onSwipeLeft,l=Object(Wt.a)(),u=Jt(),s=Object(r.useRef)(),m=Object(r.useRef)(),d=Object(r.useState)({x:0,y:0}),f=Object(_e.a)(d,2),p=f[0],g=f[1],v=Object(r.useState)(),E=Object(_e.a)(v,2),h=E[0],y=E[1];a=Object(b.a)({color:l.palette.error.dark,icon:zt.a,moveOutOfScreen:!0},a),n=Object(b.a)({color:l.palette.primary.main,icon:Xt.a,moveOutOfScreen:!1},n);var O=function(){Object(Bt.a)({targets:m.current,translateX:0,duration:200,easing:"easeOutSine",autoplay:!0,complete:function(){return g({x:0,y:0})}})},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(t){Object(Bt.a)({targets:m.current,translateX:m.current.offsetWidth*e,duration:150,easing:"easeOutSine",autoplay:!0,complete:t})}))},w=function(e){return s.current.style.backgroundColor=e},x=function(e){m.current.style.borderRadius="right"===e?"0 ".concat(l.spacing(1),"px ").concat(l.spacing(1),"px 0"):"".concat(l.spacing(1),"px 0 0 ").concat(l.spacing(1),"px")};return Object(r.useEffect)((function(){m.current.style.transform="translateX(".concat(p.x,"px)"),0!==p.x||0!==p.y?(m.current.style.transition="box-shadow 100ms linear",m.current.style.boxShadow=l.shadows[2],m.current.style.zIndex="10"):(m.current.style.boxShadow=null,m.current.style.zIndex=null),p.x<0?(x("right"),w(a.color||""),y(a.icon)):p.x>0?(x("left"),w(n.color||""),y(n.icon)):(w(null),y(null))}),[p,n,a]),i.a.createElement("div",{ref:s,className:u.container},h&&i.a.createElement(h,{className:u.icon,style:{right:p.x<0?l.spacing(2):"null",left:p.x>0?l.spacing(2):"null"}}),i.a.createElement(Ut,{onDrag:function(e){var t=p.x+e.deltaX;t>0&&!o||t<0&&!c||g(Object(b.a)(Object(b.a)({},p),{},{x:t}))},onDragStop:function(){p.x<0?function(){var e=m.current.offsetWidth;p.x<=e/-2?a.moveOutOfScreen?j(-1).then(c):(O(),c()):O()}():p.x>0&&function(){var e=m.current.offsetWidth;p.x>=e/2?n.moveOutOfScreen?(j(1),o()):(O(),o()):O()}()}},i.a.cloneElement(i.a.Children.only(t),{ref:m})))};var qt=function(e){var t=e.open,a=e.onClose,n=e.data;return i.a.createElement(Ot.a,{open:t,onClose:a},i.a.createElement(jt.a,null,"Edit Entry"),i.a.createElement(wt.a,null,i.a.createElement(Ft,{title:!1,submitButton:!0,defaultValues:{activity_name:n.activity.name,activity_id:n.activity.id,finished_at:n.finished_at},onSubmit:function(e){return new Promise((function(t){se(Object(b.a)(Object(b.a)({},e),{},{id:n.id})).then((function(){t(),a()}))}))}})))},Kt=Object(Me.a)((function(e){return{container:{overflowX:"hidden",width:"100%"},item:{backgroundColor:e.palette.background.paper},itemInnerWrapper:{display:"flex",width:"100%"},itemPrimary:{flexGrow:1},itemSecondary:{height:56,display:"flex",alignItems:"center"},totalDuration:{fontSize:16,marginRight:e.spacing(),opacity:.87},time:{fontSize:16}}}));function Qt(e){var t,a=e.entry,n=e.reloadList,o=Kt(),c=Object(r.useState)(!1),l=Object(_e.a)(c,2),u=l[0],s=l[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement($t,{onSwipeLeft:function(){me(a).then((function(){return n()})).catch((function(e){return console.error(e)}))},onSwipeRight:function(){s(!0)}},i.a.createElement(Xe.a,{className:o.item},i.a.createElement("div",{className:o.itemInnerWrapper},i.a.createElement("div",{className:o.itemPrimary},i.a.createElement(Je.a,{primary:a.activity.name,secondary:null===(t=a.activity.category)||void 0===t?void 0:t.name})),i.a.createElement("div",{className:o.itemSecondary},a.activity.total_duration_for_date&&i.a.createElement("span",{className:o.totalDuration},Math.floor(a.activity.total_duration_for_date/1e3/3600*10)/10,"h"),i.a.createElement("span",{className:o.time},a.finished_at.format("HH:mm")))))),i.a.createElement(qt,{data:a,open:u,onClose:function(){s(!1),n()}}))}var Zt=i.a.forwardRef((function(e,t){var a=e.date,n=e.defaultValue,o=e.style,c=Kt(),l=St({method:"getPerformedActivitiesByDate",defaultValue:n,data:{date:a.format("YYYY-MM-DD")}}),u=l.isLoading,s=l.data,m=l.reload,d=Object(r.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.sort((function(e,t){return t.finished_at.unix()-e.finished_at.unix()}))}(s)}),[s]);return Object(r.useImperativeHandle)(t,(function(){return{reload:m}}),[m]),u?i.a.createElement(gt,null):i.a.createElement(Ct.a,{elevation:3,className:c.container,style:o},i.a.createElement(Ge.a,null,d.length>0?d.map((function(e,t){return i.a.createElement(Qt,{entry:e,reloadList:m,key:e.id})})):i.a.createElement(Xe.a,null,i.a.createElement(Je.a,null,"No entries"))))}));var ea=function(){var e=Object(r.useRef)();return i.a.createElement(Ze,{HeaderProps:{title:"Today"}},i.a.createElement(Ft,{onSubmit:function(t){return new Promise((function(a){ue(t).then((function(){e.current.reload(),a()})).catch((function(e){console.error(e)}))}))}}),i.a.createElement(Zt,{date:p()(),ref:e}))},ta=a(360),aa=a(352),na=a(353),ra=Object(Me.a)((function(e){return{list:{marginTop:e.spacing(2)},accordionDetails:{padding:0}}}));var ia=function(){var e=ra(),t=St("getAllPerformedActivitiesByDate"),a=t.isLoading,n=t.data;return i.a.createElement(Ze,{HeaderProps:{title:"All Time"}},i.a.createElement("div",{className:e.list},a?i.a.createElement(gt,null):Object.keys(n).map((function(t){return t=p()(t,"YYYY-DD-MM"),i.a.createElement(ta.a,{TransitionProps:{unmountOnExit:!0},key:t},i.a.createElement(aa.a,null,i.a.createElement(Ve.a,{variant:"subtitle1"},t.format("DD.MM.YYYY"))),i.a.createElement(na.a,{classes:{root:e.accordionDetails}},i.a.createElement(Zt,{date:t,defaultValue:n[t]})))}))))},oa=Object(Me.a)((function(e){return{container:{marginBottom:e.spacing(2)},divider:{margin:"0 ".concat(e.spacing(2),"px")}}}));var ca=function(e){var t=e.filter,a=void 0===t?"":t,n=e.style,r=e.onClick,o=oa(),c=St("getAllCategories"),l=c.isLoading,u=c.data;if(l)return i.a.createElement(gt,null);var s=u.filter((function(e){return e.name.toLowerCase().startsWith(a.toLowerCase())}));return i.a.createElement(Ct.a,{elevation:3,className:o.container,style:n},s.length>0?i.a.createElement(Ge.a,null,s.map((function(e,t){return i.a.createElement(i.a.Fragment,{key:e.id},i.a.createElement(Xe.a,{button:!0,onClick:function(){return r(e)}},i.a.createElement(Je.a,null,e.name)),t<s.length-1&&i.a.createElement($e.a,{className:o.divider}))}))):i.a.createElement(Ge.a,null,i.a.createElement(Xe.a,null,i.a.createElement(Je.a,null,"No categories found"))))},la=a(165);var ua=function(e){var t=Object(Wt.a)();return i.a.createElement(la.a,Object.assign({},e,{theme:function(e){return Object(b.a)(Object(b.a)({},e),{},{colors:Object(b.a)(Object(b.a)({},e.colors),{},{primary:t.palette.primary.main,primary75:t.palette.primary.main,primary50:t.palette.primary.main,primary25:t.palette.background.paper,danger:t.palette.error.main,dangerLight:t.palette.error.main,neutral0:t.palette.background.default,neutral5:t.palette.action.disabled,neutral10:t.palette.action.disabled,neutral20:t.palette.action.disabled,neutral30:t.palette.action.disabled,neutral40:t.palette.text.secondary,neutral50:t.palette.text.secondary,neutral60:t.palette.text.secondary,neutral70:t.palette.text.secondary,neutral80:t.palette.text.secondary,neutral90:t.palette.text.secondary}),spacing:Object(b.a)(Object(b.a)({},e.spacing),{},{controlHeight:t.spacing(7)})})}}))},sa=Object(Me.a)((function(e){return{title:{opacity:.87},input:{margin:"".concat(e.spacing(1),"px 0")},submitButton:{margin:"8px 0 16px 0"}}}));var ma=function(e){var t,a=e.onSubmit,n=e.defaultValues,o=e.title,c=void 0===o||o,l=e.showAllCategories,u=void 0!==l&&l,s=e.submitText,m=void 0===s?"Create":s,d=sa(),f=St("getAllTags"),p=f.isLoading,g=f.data,v=Object(rt.b)({defaultValues:n}),E=v.register,h=v.watch,y=v.reset,O=v.getValues,j=v.setValue,w=v.control,x=Object(r.useState)(null===n||void 0===n?void 0:n.category_id),C=Object(_e.a)(x,2),S=C[0],k=C[1],N=Object(r.useMemo)((function(){return null===g||void 0===g?void 0:g.map((function(e){return{label:e.name,value:e.id}}))}),[g]);return p?i.a.createElement(gt,null):(n&&console.log(n),i.a.createElement(i.a.Fragment,null,c&&i.a.createElement(Ve.a,{variant:"subtitle1",className:d.title},"Create Activity"),i.a.createElement("form",{noValidate:!0},i.a.createElement(it.a,{variant:"outlined",label:"Name",name:"name",inputRef:E(),className:d.input,fullWidth:!0,autoComplete:"off"}),i.a.createElement(it.a,{variant:"outlined",label:"Category",name:"category_name",inputRef:E(),className:d.input,fullWidth:!0,autoComplete:"off"}),i.a.createElement(ca,{filter:h("category_name"),style:{display:!u&&!h("category_name")&&"none"},onClick:function(e){k(e.id),j("category_name",e.name)}}),i.a.createElement(rt.a,{as:ua,name:"tag_ids",label:"Tags",control:w,options:N,isMulti:!0,className:d.input,defaultValue:null===n||void 0===n||null===(t=n.tags)||void 0===t?void 0:t.map((function(e){return N.find((function(t){return t.value===e.id}))}))}),i.a.createElement(ot.a,{variant:"outlined",color:"primary",fullWidth:!0,onClick:function(){var e,t=O();t.name&&S&&(t.tag_ids=null===(e=t.tag_ids)||void 0===e?void 0:e.map((function(e){return e.value})),a(Object(b.a)(Object(b.a)({},t),{},{category_id:S})).then(y))},className:d.submitButton},m))))},da=a(4),fa=a(364),pa=a(354),ga=a(161),va=a.n(ga),ba=a(162),Ea=a.n(ba),ha=Object(Me.a)((function(e){return{container:{marginTop:e.spacing(2),padding:0,overflow:"hidden"}}}));function ya(e){var t=e.data,a=e.reloadList,n=e.apiDelete,o=e.EditDialog,c=e.ListItem,l=e.SwipeableProps,u=Object(r.useState)(!1),s=Object(_e.a)(u,2),m=s[0],d=s[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement($t,Object.assign({onSwipeLeft:function(){n({id:t.id}).then(a).catch(console.error)},onSwipeRight:function(){d(!0)},key:t.id},l),i.a.createElement(c,{data:t})),i.a.createElement(o,{open:m,onClose:function(){d(!1),a()},data:t}))}var Oa=i.a.forwardRef((function(e,t){var a=e.APIMethods,o=e.EditDialog,c=e.ListItem,l=e.SwipeableProps,u=e.sort,s=ha(),m=Object(r.useRef)(new EventTarget),d=St({method:a.get,onLoad:function(e){return m.current.dispatchEvent(new CustomEvent("load",{detail:e}))}}),f=d.isLoading,p=d.data,g=d.reload;return Object(r.useImperativeHandle)(t,(function(){return{reload:g,event:m.current}}),[g,m]),f?i.a.createElement(gt,null):(u?p.sort(u):p.sort((function(e,t){return e.name.localeCompare(t.name)})),i.a.createElement(Ct.a,{className:s.container},i.a.createElement(Ge.a,null,p.length>0?p.map((function(e){return i.a.createElement(ya,{key:e.id,data:e,reloadList:g,apiDelete:n[a.delete],EditDialog:o,ListItem:c,SwipeableProps:l})})):i.a.createElement(Xe.a,null,i.a.createElement(Je.a,null,"No entries")))))}));var ja=function(e){var t=e.open,a=e.onClose,n=e.data;return i.a.createElement(Ot.a,{open:t,onClose:a},i.a.createElement(jt.a,null,"Edit Activity"),i.a.createElement(wt.a,null,i.a.createElement(ma,{title:!1,showAllCategories:!0,submitText:"Save",defaultValues:Object(b.a)(Object(b.a)({},n),{},{category_id:n.category.id,category_name:n.category.name}),onSubmit:function(e){return new Promise((function(t){re(Object(b.a)(Object(b.a)({},e),{},{id:n.id})).then((function(){t(),a()}))}))}})))},wa=Object(Me.a)((function(e){return{buttonGroupWrapper:{display:"flex",justifyContent:"flex-end",margin:"".concat(e.spacing(1),"px 0")},listItem:{display:"flex",flexDirection:"column",alignItems:"stretch",backgroundColor:e.palette.background.paper},main:{display:"flex",justifyContent:"space-between"},secondary:{fontSize:14,lineHeight:2,opacity:.87},tags:{marginTop:e.spacing(1)},chip:{marginRight:e.spacing(1),"&:last-child":{margin:0}}}}));var xa=i.a.forwardRef((function(e,t){var a,n=Object(Ne.g)(),o=wa(),c=Object(r.useState)("name"),l=Object(_e.a)(c,2),u=l[0],s=l[1];return"duration"===u&&(a=function(e,t){return t.total_duration-e.total_duration}),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:o.buttonGroupWrapper},i.a.createElement(fa.a,{value:u,onChange:function(e,t){return t&&s(t)},exclusive:!0},i.a.createElement(pa.a,{value:"name"},i.a.createElement(va.a,null)),i.a.createElement(pa.a,{value:"duration"},i.a.createElement(Ea.a,null)))),i.a.createElement(Oa,{ref:t,APIMethods:{get:"getAllActivitiesDetailed",delete:"deleteActivity"},SwipeableProps:{onSwipeLeft:null},EditDialog:ja,sort:a,ListItem:i.a.forwardRef((function(e,t){var a=e.data,r=Object(da.a)(e,["data"]);return i.a.createElement(Xe.a,Object.assign({ref:t,className:o.listItem,onClick:function(){return n.push("/activity/"+a.id)}},r),i.a.createElement("div",{className:o.main},i.a.createElement(Ve.a,{variant:"subtitle1"},a.name),i.a.createElement("span",{className:o.secondary},a.category.name)),i.a.createElement("div",{className:o.main},i.a.createElement("div",{className:o.stats},Pt(a.total_duration,0),"h"),i.a.createElement("div",{className:o.tags},a.tags.map((function(e){return i.a.createElement(yt.a,{variant:"outlined",label:e.name,size:"small",className:o.chip,key:e.id})})))))}))}))}));var Ca=function(){var e=Object(r.useRef)();return i.a.createElement(Ze,{HeaderProps:{title:"Activities"}},i.a.createElement(ma,{onSubmit:function(t){return new Promise((function(a){ne(t).then((function(){e.current.reload(),a()})).catch((function(e){return console.error(e)}))}))}}),i.a.createElement(xa,{ref:e}))},Sa=Object(Me.a)((function(e){return{container:{padding:e.spacing(1)},title:{textAlign:"center",margin:"".concat(e.spacing(1),"px 0")}}}));var ka=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a){var n=a.className,r=Object(da.a)(a,["className"]),o=Sa();return i.a.createElement(Ct.a,{className:Object(nt.a)(o.container,n)},t.title&&i.a.createElement(Ve.a,{variant:"h6",className:o.title},t.title),i.a.createElement(e,r))}};var Na=ka((function(e){var t=e.data,a=e.attribute,n=void 0===a?"total_duration":a,r=Object(Wt.a)();return t.sort((function(e,t){return t[n]-e[n]})),i.a.createElement(g.d,{height:300,data:{labels:t.map((function(e){return e.name})),datasets:[{data:t.map((function(e){return Pt(e[n])})),backgroundColor:H,borderColor:r.palette.background.paper}]}})}),{title:"Category Shares"}),_a=Object(Me.a)((function(e){return{title:{opacity:.87},input:{margin:"".concat(e.spacing(1),"px 0")},submitButton:{margin:"8px 0 16px 0"}}}));var Aa=function(e){var t,a=e.onSubmit,n=e.defaultValues,o=e.title,c=void 0===o||o,l=e.submitText,u=void 0===l?"Create":l,s=_a(),m=St("getAllTags"),d=m.isLoading,f=m.data,p=Object(rt.b)({defaultValues:n}),g=p.register,v=p.reset,b=p.getValues,E=p.control,h=Object(r.useMemo)((function(){return null===f||void 0===f?void 0:f.map((function(e){return{label:e.name,value:e.id}}))}),[f]);return d?i.a.createElement(gt,null):i.a.createElement(i.a.Fragment,null,c&&i.a.createElement(Ve.a,{variant:"subtitle1",className:s.title},"Create Category"),i.a.createElement("form",{noValidate:!0},i.a.createElement(it.a,{variant:"outlined",label:"Name",name:"name",inputRef:g(),className:s.input,fullWidth:!0,autoComplete:"off"}),i.a.createElement(rt.a,{as:ua,name:"tag_ids",label:"Tags",control:E,options:h,isMulti:!0,className:s.input,defaultValue:null===n||void 0===n||null===(t=n.tags)||void 0===t?void 0:t.map((function(e){return h.find((function(t){return t.value===e.id}))}))}),i.a.createElement(ot.a,{variant:"outlined",color:"primary",fullWidth:!0,onClick:function(){var e,t=b();t.name&&(t.tag_ids=null===(e=t.tag_ids)||void 0===e?void 0:e.map((function(e){return e.value})),a(t).then(v))},className:s.submitButton},u)))};var Da=function(e){var t=e.open,a=e.onClose,n=e.data;return i.a.createElement(Ot.a,{open:t,onClose:a},i.a.createElement(jt.a,null,"Edit Category"),i.a.createElement(wt.a,null,i.a.createElement(Aa,{title:!1,defaultValues:n,submitText:"Save",onSubmit:function(e){return new Promise((function(t){Q(Object(b.a)(Object(b.a)({},e),{},{id:n.id})).then((function(){t(),a()}))}))}})))},Ma=Object(Me.a)((function(e){return{listItem:{backgroundColor:e.palette.background.paper,display:"flex",justifyContent:"space-between"},chip:{marginRight:e.spacing(1),"&:last-child":{margin:0}}}}));var Ia=i.a.forwardRef((function(e,t){var a=Ma();return i.a.createElement(Oa,{ref:t,APIMethods:{get:"getAllCategoriesDetailed",delete:"deleteCategory"},SwipeableProps:{onSwipeLeft:null},EditDialog:Da,ListItem:i.a.forwardRef((function(e,t){var n=e.data,r=Object(da.a)(e,["data"]);return i.a.createElement(Xe.a,Object.assign({ref:t,className:a.listItem},r),i.a.createElement(Je.a,null,n.name),i.a.createElement("div",null,n.tags.map((function(e){return i.a.createElement(yt.a,{variant:"outlined",label:e.name,size:"small",className:a.chip,key:e.id})}))))}))})})),Ta=Object(Me.a)((function(e){return{chart:{marginTop:e.spacing(1),marginBottom:e.spacing(3)}}}));var Ya=function(){var e=Ta(),t=Object(r.useRef)(),a=Object(r.useState)(),n=Object(_e.a)(a,2),o=n[0],c=n[1];return Object(r.useEffect)((function(){var e=t.current.event,a=function(e){var t=e.detail;return c(t)};return e.addEventListener("load",a),function(){e.removeEventListener("load",a)}}),[t]),i.a.createElement(Ze,{HeaderProps:{title:"Categories"}},o?i.a.createElement(Na,{data:o,className:e.chart}):i.a.createElement(gt,null),i.a.createElement(Aa,{onSubmit:function(e){return new Promise((function(a){K(e).then((function(){t.current.reload(),a()})).catch((function(e){return console.error(e)}))}))}}),i.a.createElement(Ia,{ref:t}))},Ra=Object(Me.a)((function(e){return{title:{opacity:.87},input:{margin:"".concat(e.spacing(1),"px 0")},submitButton:{margin:"8px 0 16px 0"}}}));var Pa=function(e){var t=e.onSubmit,a=e.defaultValues,n=e.title,r=void 0===n||n,o=e.submitText,c=void 0===o?"Create":o,l=Ra(),u=Object(rt.b)({defaultValues:a}),s=u.register,m=u.reset,d=u.getValues;return i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(Ve.a,{variant:"subtitle1",className:l.title},"Create Tag"),i.a.createElement("form",{noValidate:!0},i.a.createElement(it.a,{variant:"outlined",label:"Name",name:"name",inputRef:s(),className:l.input,fullWidth:!0,autoComplete:"off"}),i.a.createElement(ot.a,{variant:"outlined",color:"primary",fullWidth:!0,onClick:function(){var e=d();e.name&&t(e).then(m)},className:l.submitButton},c)))};var La=function(e){var t=e.open,a=e.onClose,n=e.data;return i.a.createElement(Ot.a,{open:t,onClose:a},i.a.createElement(jt.a,null,"Edit Tag"),i.a.createElement(wt.a,null,i.a.createElement(Pa,{title:!1,defaultValues:n,submitText:"Save",onSubmit:function(e){return new Promise((function(t){pe(Object(b.a)(Object(b.a)({},e),{},{id:n.id})).then((function(){t(),a()}))}))}})))},Va=Object(Me.a)((function(e){return{listItem:{backgroundColor:e.palette.background.paper}}}));var Fa=i.a.forwardRef((function(e,t){var a=Va();return i.a.createElement(Oa,{ref:t,APIMethods:{get:"getAllTags",delete:"deleteTag"},EditDialog:La,ListItem:i.a.forwardRef((function(e,t){var n=e.data,r=Object(da.a)(e,["data"]);return i.a.createElement(Xe.a,Object.assign({ref:t,className:a.listItem},r),i.a.createElement(Je.a,null,n.name))}))})}));var Ba=function(){var e=Object(r.useRef)();return i.a.createElement(Ze,{HeaderProps:{title:"TagsPage"}},i.a.createElement(Pa,{onSubmit:function(t){return new Promise((function(a){fe(t).then((function(){e.current.reload(),a()})).catch((function(e){return console.error(e)}))}))}}),i.a.createElement(Fa,{ref:e}))},Wa=a(163),Ha=a.n(Wa),za=Object(Me.a)((function(e){return{container:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",margin:"".concat(e.spacing(4),"px 0")},title:{marginBottom:e.spacing(2)}}}));var Ga=function(){var e=za();return i.a.createElement("div",{className:e.container},i.a.createElement(Ve.a,{variant:"h6",className:e.title},"This page is empty"),i.a.createElement("img",{src:Ha.a,alt:"No content here"}))},Xa=a(144),Ua=a(145),Ja=Object(Me.a)((function(e){return{container:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},controls:{display:"flex",justifyContent:"space-between",width:120}}}));var $a=function(e){var t=e.defaultValue,a=void 0===t?p()():t,n=e.onChange,o=void 0===n?function(){}:n,c=Ja(),l=Object(r.useState)(a),u=Object(_e.a)(l,2),s=u[0],m=u[1];return i.a.createElement("div",{className:c.container},i.a.createElement(Ve.a,{variant:"subtitle1"},s.format("DD.MM.YYYY")," - ",s.format("dddd")),i.a.createElement("div",{className:c.controls},i.a.createElement(Ae.a,{onClick:function(){var e=p()(s).subtract(1,"days");m(e),o(e)}},i.a.createElement(Xa.a,null)),i.a.createElement(Ae.a,{onClick:function(){var e=p()(s).add(1,"days");m(e),o(e)},disabled:s.format("YYYY-MM-DD")===p()().format("YYYY-MM-DD")},i.a.createElement(Ua.a,null))))},qa=Object(Me.a)((function(e){return{bar:{width:"60%",height:e.spacing(1),position:"relative",marginRight:e.spacing(4)},barElement:{width:"100%",height:"100%",position:"absolute",backgroundColor:e.palette.secondary.main,borderRadius:e.spacing(.5)},barSurface:{width:"100%",height:"100%",position:"absolute",backgroundColor:e.palette.secondary.main,borderRadius:e.spacing(.5),opacity:.35}}}));var Ka=function(e){var t=e.className,a=e.progress,n=qa();return i.a.createElement("div",{className:Object(nt.a)(t,n.bar)},i.a.createElement("div",{className:n.barElement,style:{width:100*a+"%"}}),i.a.createElement("div",{className:Object(nt.a)(n.barElement,n.barSurface)}))},Qa=Object(Me.a)((function(e){return{container:{padding:"0 ".concat(e.spacing(1),"px"),display:"grid",gridTemplate:"2fr 1fr / 6fr 4fr",gridTemplateAreas:'\n            "title hours"\n            "bar   hours"\n        ',gridColumnGap:e.spacing(4),gridRowGap:e.spacing(1),alignItems:"center"},title:{gridArea:"title"},bar:{width:"100%",height:e.spacing(1),gridArea:"bar"},hours:{gridArea:"hours",textAlign:"center"}}}));var Za=ka((function(e){var t=e.data,a=Qa(),n=Math.floor(t/1e3/3600*10)/10;return i.a.createElement("div",{className:a.container},i.a.createElement(Ve.a,{variant:"h6",className:a.title},"Time Awake"),i.a.createElement(Ka,{progress:n/24,className:a.bar}),i.a.createElement(Ve.a,{variant:"h6",className:a.hours},n," Hours"))})),en=a(9);function tn(e){return Pt(e)>=1?Pt(e,1)+" Hours":function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Math.floor(e/1e3/60*Math.pow(10,t))/Math.pow(10,t)}(e)+" Minutes"}var an=Object(Me.a)((function(e){return{container:{display:"grid",gridTemplate:"1fr 1fr / 8fr 2fr",gridTemplateAreas:'\n            "title    circle"\n            "duration circle"\n        ',justifyContent:"space-between",alignItems:"center",padding:"0 ".concat(e.spacing(1),"px")},containerSmall:{display:"flex",flexDirection:"column",alignItems:"center",width:120},title:{gridArea:"title",fontWeight:500,lineHeight:1.5},duration:{gridArea:"duration",opacity:.87,lineHeight:1.5,fontSize:16},circle:{gridArea:"circle"}}}));var nn=ka((function(e){var t,a=e.data,n=e.timeAwake,r=e.small,o=void 0!==r&&r,c=Object(Wt.a)(),l=an(),u=Math.floor(a.total_duration_for_date/n*100);return i.a.createElement("div",{className:Object(nt.a)((t={},Object(en.a)(t,l.container,!o),Object(en.a)(t,l.containerSmall,o),t))},i.a.createElement(Ve.a,{variant:"subtitle1",className:l.title},a.name),i.a.createElement(Ve.a,{variant:"subtitle1",className:l.duration},tn(a.total_duration_for_date)),!o&&i.a.createElement("div",{className:l.circle},i.a.createElement(g.b,{height:40,width:40,data:{datasets:[{data:[u,100-u],backgroundColor:[c.palette.secondary.main,c.palette.secondary.dark],borderWidth:0}]},options:{maintainAspectRatio:!1,cutoutPercentage:75,legend:{display:!1},tooltips:{enabled:!1},hover:{mode:null},elements:{arc:{roundedCornersFor:0},center:{maxText:"100%",text:u+"%",fontColor:c.palette.text.primary,fontFamily:c.typography.subtitle1.fontFamily,fontStyle:"normal",minFontSize:1,maxFontSize:64}}}})))})),rn=Object(Me.a)((function(e){return{chartGroup:{marginBottom:e.spacing(2)},chart:{marginBottom:e.spacing(1)},flex:{display:"flex",overflowX:"scroll","& > div":{marginRight:e.spacing(1)}}}}));var on=function(){var e=Object(Ne.g)(),t=Object(Ne.h)().date,a=rn(),n=St({method:"getAnalysisByDate",data:t}),o=n.isLoading,c=n.data,l=n.error,u=n.reload,s=Object(r.useMemo)((function(){if(!c)return[];var e=c.activities.filter((function(e){return e.total_duration_for_date}));return[e.filter((function(e){return e.total_duration_for_date/c.time_awake>=.05})),e.filter((function(e){return e.total_duration_for_date/c.time_awake<.05}))]}),[c]),m=Object(_e.a)(s,2),d=m[0],f=m[1];return Object(r.useEffect)((function(){return(c||l)&&u()}),[t]),i.a.createElement(Ze,{HeaderProps:{title:"Analysis"}},i.a.createElement($a,{onChange:function(t){o||e.push("/analysis/"+t.format("YYYY-MM-DD"))},defaultValue:p()(t,"YYYY-MM-DD")}),o?i.a.createElement(gt,null):404===(null===l||void 0===l?void 0:l.response.status)?i.a.createElement(Ga,null):i.a.createElement("div",null,i.a.createElement(Za,{data:c.time_awake,className:a.chartGroup}),i.a.createElement("div",{className:a.chartGroup},d.map((function(e){return i.a.createElement(nn,{data:e,timeAwake:c.time_awake,className:a.chart,key:e.id})})),i.a.createElement("div",{className:Object(nt.a)(a.flex,a.chart)},f.map((function(e){return i.a.createElement(nn,{data:e,timeAwake:c.time_awake,small:!0,key:e.id})})))),i.a.createElement(Na,{data:c.categories,attribute:"total_duration_for_date",className:a.chartGroup})))};var cn=Object(Me.a)((function(e){return{subtitle:{fontSize:16,textAlign:"center",opacity:.65,margin:"-".concat(e.spacing(),"px 0 ").concat(e.spacing(2),"px")}}}));var ln=ka((function(e){var t=e.data,a=Object(Wt.a)(),n=cn(),o=Object(r.useMemo)((function(){var e=Object.keys(t).map((function(e){return p()(e,"DD.MM.YYYY")})).sort((function(e,t){return e-t})),a=e.map((function(e){return e.format("DD.MM.YYYY")})),n=a.map((function(e){return t[e].reduce((function(e,t){return e+t}),0)/1e3/3600}));return{labels:a,values:n,firstDate:e[0],lastDate:e[e.length-1]}}),[t]),c=o.labels,l=o.values,u=o.firstDate,s=o.lastDate;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:n.subtitle},null===u||void 0===u?void 0:u.format("DD MMMM")," - ",null===s||void 0===s?void 0:s.format("DD MMMM")),i.a.createElement(g.c,{height:300,data:{labels:c,datasets:[{borderColor:a.palette.secondary.main,data:l}]},options:{elements:{point:{radius:0}},legend:{display:!1},scales:{xAxes:[{ticks:{autoSkip:!1,minRotation:0,maxRotation:0,callback:function(e,t){var a,n=+e.substring(0,2);return 0===t||1===n?p()(e,"DD.MM.YYYY").format("MMMM"):n%10===0&&n<30&&(a=u,(p()(e,"DD.MM.YYYY")-a)/1e3/3600/24>9)?n:void 0}}}]}}}))}),{title:"Durations Per Day"}),un=Object(Me.a)((function(e){return{subtitle:{opacity:.87,color:e.palette.text.primary,fontSize:16},main:{marginTop:e.spacing(1)}}}));var sn=function(){var e=Object(Ne.h)().id,t=un(),a=St({method:"getActivity",data:e}),n=a.isLoading,r=a.data;return n?i.a.createElement(Ze,null,i.a.createElement(gt,null)):i.a.createElement(Ze,{HeaderProps:{title:r.name,Subtitle:function(){return i.a.createElement(Ve.a,{variant:"h6",className:t.subtitle},r.category.name)}}},i.a.createElement("div",{className:t.main},i.a.createElement(ln,{data:r.durations})))};var mn=function(){return Object(l.c)((function(e){return e.auth.isLoggedIn}))?i.a.createElement(ke.a,null,i.a.createElement(Ne.d,null,i.a.createElement(Ne.b,{path:"/profile"},i.a.createElement(ea,null)),i.a.createElement(Ne.b,{path:"/logout"},i.a.createElement(Et,null)),i.a.createElement(Ne.b,{path:"/today"},i.a.createElement(ea,null)),i.a.createElement(Ne.b,{path:"/all-time"},i.a.createElement(ia,null)),i.a.createElement(Ne.b,{path:"/activities"},i.a.createElement(Ca,null)),i.a.createElement(Ne.b,{path:"/categories"},i.a.createElement(Ya,null)),i.a.createElement(Ne.b,{path:"/tags"},i.a.createElement(Ba,null)),i.a.createElement(Ne.b,{path:"/analysis/:date"},i.a.createElement(on,null)),i.a.createElement(Ne.b,{path:"/activity/:id"},i.a.createElement(sn,null)),i.a.createElement(Ne.b,{path:"/"},i.a.createElement(Ne.a,{to:"/today"})))):i.a.createElement(bt,null)};var dn=function(){return i.a.createElement("div",null,i.a.createElement(Se.a,null),i.a.createElement(mn,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(302);g.a.pluginService.register({afterUpdate:function(e){if(void 0!==e.config.options.elements.arc.roundedCornersFor){var t=e.getDatasetMeta(0).data[e.config.options.elements.arc.roundedCornersFor];t.round={x:(e.chartArea.left+e.chartArea.right)/2,y:(e.chartArea.top+e.chartArea.bottom)/2,radius:(e.outerRadius+e.innerRadius)/2,thickness:(e.outerRadius-e.innerRadius)/2,backgroundColor:t._model.backgroundColor}}},afterDraw:function(e){if(void 0!==e.config.options.elements.arc.roundedCornersFor){var t=e.chart.ctx,a=e.getDatasetMeta(0).data[e.config.options.elements.arc.roundedCornersFor],n=Math.PI/2-a._view.startAngle,r=Math.PI/2-a._view.endAngle;t.save(),t.translate(a.round.x,a.round.y),t.fillStyle=a.round.backgroundColor,t.beginPath(),t.arc(a.round.radius*Math.sin(n),a.round.radius*Math.cos(n),a.round.thickness,0,2*Math.PI),t.arc(a.round.radius*Math.sin(r),a.round.radius*Math.cos(r),a.round.thickness,0,2*Math.PI),t.closePath(),t.fill(),t.restore()}}}),g.a.pluginService.register({afterUpdate:function(e){if(e.config.options.elements.center){var t=g.a.helpers,a=e.config.options.elements.center,n=g.a.defaults.global,r=e.chart.ctx,i=t.getValueOrDefault(a.fontStyle,n.defaultFontStyle),o=t.getValueOrDefault(a.fontFamily,n.defaultFontFamily);if(a.fontSize)var c=a.fontSize;else{r.save();c=t.getValueOrDefault(a.minFontSize,1);for(var l=t.getValueOrDefault(a.maxFontSize,256),u=t.getValueOrDefault(a.maxText,a.text);;){if(r.font=t.fontString(c,i,o),!(r.measureText(u).width<2*e.innerRadius&&c<l)){c-=1;break}c+=1}r.restore()}e.center={font:t.fontString(c,i,o),fillStyle:t.getValueOrDefault(a.fontColor,n.defaultFontColor)}}},afterDraw:function(e){if(e.center){var t=e.config.options.elements.center,a=e.chart.ctx;a.save(),a.font=e.center.font,a.fillStyle=e.center.fillStyle,a.textAlign="center",a.textBaseline="middle";var n=(e.chartArea.left+e.chartArea.right)/2,r=(e.chartArea.top+e.chartArea.bottom)/2;a.fillText(t.text,n,r),a.restore()}}}),g.e.global.defaultFontColor="#fff",window.moment=p.a;var fn=Object(u.a)({palette:{theme:"dark",type:"dark",background:{default:"#282833",paper:"#333340"},primary:{main:"#BB86FC",variant:"#3700B3"},secondary:{main:"#03DAC5",dark:"#336D6F"},error:{main:"#CF6679"}}});c.a.render(i.a.createElement(l.a,{store:Ce},i.a.createElement(s.a,{theme:fn},i.a.createElement(m.a,{utils:d.a},i.a.createElement(dn,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[184,1,2]]]);
//# sourceMappingURL=main.f92a5a7b.chunk.js.map