(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{140:function(e,t,a){e.exports=a(172)},171:function(e,t,a){},172:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"setTokenHeader",(function(){return H})),a.d(n,"login",(function(){return Y})),a.d(n,"register",(function(){return X})),a.d(n,"getProfile",(function(){return z})),a.d(n,"getAllCategories",(function(){return G})),a.d(n,"createCategory",(function(){return U})),a.d(n,"updateCategory",(function(){return J})),a.d(n,"deleteCategory",(function(){return $})),a.d(n,"getAllActivities",(function(){return q})),a.d(n,"getAllActivitiesDetailed",(function(){return K})),a.d(n,"getActivity",(function(){return Q})),a.d(n,"createActivity",(function(){return Z})),a.d(n,"updateActivity",(function(){return ee})),a.d(n,"deleteActivity",(function(){return te})),a.d(n,"getAllPerformedActivities",(function(){return ae})),a.d(n,"getAllPerformedActivitiesByDate",(function(){return ne})),a.d(n,"getPerformedActivitiesByDate",(function(){return re})),a.d(n,"createPerformedActivity",(function(){return ie})),a.d(n,"updatePerformedActivity",(function(){return ce})),a.d(n,"deletePerformedActivity",(function(){return oe})),a.d(n,"getAllTags",(function(){return le})),a.d(n,"createTag",(function(){return ue})),a.d(n,"updateTag",(function(){return se})),a.d(n,"deleteTag",(function(){return me})),a.d(n,"getAllShortcuts",(function(){return de})),a.d(n,"createShortcut",(function(){return fe})),a.d(n,"deleteShortcut",(function(){return pe}));var r=a(0),i=a.n(r),c=a(8),o=a.n(c),l=a(21),u=a(118),s=a(225),m=a(26),d=a(104),f=a(49),p=a(10),g=a(15),v=a.n(g),E=a(37),b=a.n(E),h=a(63),y=a(106),O=a.n(y),j=a(107),C=a.n(j),x=a(108),w=a.n(x),S=a(109),N=a.n(S),k=a(111),I=a.n(k),A=a(112),T=a.n(A),_=a(113),R=a.n(_),P=a(110),D=a.n(P),L=window.location.origin+"/api",V=[[{title:"Profile",to:"/profile",icon:O.a},{title:"Logout",to:"/logout",icon:C.a}],[{title:"Today",to:"/today",icon:w.a},{title:"All Time",to:"/all-time",icon:N.a},{title:"Analysis",to:"/analysis",icon:D.a}],[{title:"Activities",to:"/activities",icon:I.a},{title:"Categories",to:"/categories",icon:T.a},{title:"Tags",to:"/tags",icon:R.a}]];function B(e){return e.map((function(e){return function(e){return e.finished_at=b()(e.finished_at).utcOffset("+02:00"),e}(e)}))}function M(e){return e.map((function(e){return function(e){return e.icon=h[e.icon],e}(e)}))}function W(e){var t;return"PERFORMED_ACTIVITIES"===e?t=function(e){return B(e.data)}:"PERFORMED_ACTIVITIES_BY_DATE"===e?t=function(e){return Object.values(e.data).map(B)}:"SHORTCUTS"===e&&(t=function(e){return M(e.data)}),function(e){return new Promise((function(a){t(e),a(e)}))}}function H(e){v.a.defaults.headers.common={Authorization:"Baerer "+e}}function F(e){return L+e}var Y=function(e){return v.a.post(F("/auth/login"),e)},X=function(e){return v.a.post(F("/auth/register"),e)},z=function(){return v.a.get(F("/auth"))},G=function(){return v.a.get(F("/categories"))},U=function(e){return v.a.post(F("/categories"),e)},J=function(e){return v.a.put(F("/categories"),e)},$=function(e){return v.a.delete(F("/categories"),{data:e})},q=function(){return v.a.get(F("/activities"))},K=function(){return v.a.get(F("/activities?details=true"))},Q=function(e){return v.a.get(F("/activities/"+e))},Z=function(e){return v.a.post(F("/activities"),e)},ee=function(e){return v.a.put(F("/activities"),e)},te=function(e){return v.a.delete(F("/activities"),{data:e})},ae=function(){return v.a.get(F("/performed-activities")).then(W("PERFORMED_ACTIVITIES"))},ne=function(){return v.a.get(F("/performed-activities/date")).then(W("PERFORMED_ACTIVITIES_BY_DATE"))},re=function(e){return v.a.get(F("/performed-activities/date?date=".concat(e.date))).then(W("PERFORMED_ACTIVITIES"))},ie=function(e){return v.a.post(F("/performed-activities"),e)},ce=function(e){return v.a.put(F("/performed-activities"),e)},oe=function(e){return v.a.delete(F("/performed-activities"),{data:e})},le=function(){return v.a.get(F("/tags"))},ue=function(e){return v.a.post(F("/tags"),e)},se=function(e){return v.a.put(F("/tags"),e)},me=function(e){return v.a.delete(F("/tags"),{data:e})},de=function(){return v.a.get(F("/shortcuts")).then(W("SHORTCUTS"))},fe=function(e){return v.a.post(F("/shortcuts"),e)},pe=function(e){return v.a.delete(F("/shortcuts"),{data:e})},ge={token:localStorage.getItem("token"),user:null,isLoggedIn:!1};H(localStorage.getItem("token"));var ve,Ee,be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return localStorage.setItem("token",t.token),H(t.token),Object(p.a)(Object(p.a)({},e),{},{token:t.token,user:t.user,isLoggedIn:!0});case"LOGOUT":return localStorage.removeItem("token"),H(null),Object(p.a)(Object(p.a)({},ge),{},{token:null});default:return e}},he=Object(f.b)({auth:be}),ye=Object(f.c)(he,null===(ve=(Ee=window).__REDUX_DEVTOOLS_EXTENSION__)||void 0===ve?void 0:ve.call(Ee)),Oe=a(224),je=a(60),Ce=a(19),xe=a(6),we=a(173),Se=a(217),Ne=a(206),ke=a(52),Ie=a.n(ke),Ae=a(78),Te=a.n(Ae),_e=a(207),Re=a(208),Pe=a(56),De=a(114),Le=a.n(De),Ve=Object(Ne.a)((function(e){return{appBar:{backgroundColor:e.palette.background.default,boxShadow:"none"},title:{flexGrow:1,fontWeight:"medium",marginLeft:20}}}));var Be=function(e){var t=e.title,a=e.onMenuClick,n=Object(l.c)((function(e){return e.auth.isLoggedIn})),r=Ve();return n?i.a.createElement(_e.a,{className:r.appBar,position:"static"},i.a.createElement(Re.a,null,i.a.createElement(we.a,{edge:"start",onClick:a},i.a.createElement(Le.a,null)),i.a.createElement(Pe.a,{variant:"h6",className:r.title,color:"textPrimary"},t))):null},Me=a(230),We=a(209),He=a(210),Fe=a(211),Ye=a(212),Xe=a(213),ze=Object(Ne.a)((function(e){return{innerDrawer:{width:256},head:{padding:e.spacing(2),paddingBottom:0}}}));var Ge=function(e){var t=e.open,a=e.onOpen,n=e.onClose,r=Object(Ce.g)(),c=Object(l.c)((function(e){var t;return null===(t=e.auth.user)||void 0===t?void 0:t.email})),o=ze();return i.a.createElement(Me.a,{open:t,onOpen:a,onClose:n,anchor:"left",PaperProps:{className:o.innerDrawer}},i.a.createElement("div",{className:o.head},i.a.createElement(Pe.a,{variant:"subtitle1"},c)),V.map((function(e,t){return i.a.createElement(i.a.Fragment,{key:t},i.a.createElement(We.a,null,e.map((function(e,t){return i.a.createElement(He.a,{button:!0,onClick:function(){return t=e.to,n(),void r.push(t);var t},key:t},i.a.createElement(Fe.a,null,i.a.createElement(e.icon)),i.a.createElement(Ye.a,null,e.title))}))),t<V.length-1&&i.a.createElement(Xe.a,null))})))},Ue=Object(Ne.a)((function(e){return{main:{margin:function(t){return"0 ".concat(e.spacing(2),"px ").concat(e.spacing(4),"px")}}}}));var Je=function(e){var t=e.children,a=e.HeaderProps,n=void 0===a?{}:a,c=Object(l.c)((function(e){return e.auth.isLoggedIn})),o=Ue({isLoggedIn:c}),u=Object(r.useState)(!1),s=Object(xe.a)(u,2),m=s[0],d=s[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement(Be,Object.assign({onMenuClick:function(){return d(!0)}},n)),i.a.createElement(Ge,{open:m,onClose:function(){return d(!1)}}),i.a.createElement("div",{className:o.main},t))},$e=a(20),qe=a.n($e),Ke=a(35),Qe=a(3),Ze=a(27),et=a(227),tt=a(215),at=a(228);function nt(e){return{type:"LOGIN",token:e.token,user:e.user}}var rt=Object(Ne.a)((function(e){return{spacing:{marginBottom:e.spacing(4)},title:{textAlign:"center",fontWeight:500,letterSpacing:2},alternateTitle:{textAlign:"center",fontWeight:"lighter"}}}));var it=function(e){var t,a,n=e.className,c=rt(),o=Object(l.b)(),u=Object(Ze.b)(),s=u.register,m=u.handleSubmit,d=u.setError,f=u.errors,p=Object(r.useState)(!1),g=Object(xe.a)(p,2),v=g[0],E=g[1],b=function(){var e=Object(Ke.a)(qe.a.mark((function e(t){return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.email&&t.password){e.next=2;break}return e.abrupt("return");case 2:Y(t).then((function(e){o(nt(e.data))})).catch((function(e){404===e.response.status?d("email",{message:"Email Not found"}):401===e.response.status?d("password",{message:"Wrong password"}):E(!0)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement("div",{className:n},i.a.createElement(Pe.a,{variant:"h5",color:"textPrimary",className:Object(Qe.a)(c.spacing,c.title)},"LOGIN"),i.a.createElement("form",{noValidate:!0,onSubmit:m(b),className:c.spacing},i.a.createElement(et.a,{variant:"outlined",label:"Email",name:"email",type:"email",inputRef:s(),className:c.spacing,fullWidth:!0,error:!!f.email,helperText:null===(t=f.email)||void 0===t?void 0:t.message}),i.a.createElement(et.a,{variant:"outlined",label:"Password",name:"password",type:"password",inputRef:s(),className:c.spacing,fullWidth:!0,error:!!f.password,helperText:null===(a=f.password)||void 0===a?void 0:a.message}),i.a.createElement(tt.a,{variant:"outlined",color:"primary",fullWidth:!0,type:"submit"},"Login")),i.a.createElement(Pe.a,{variant:"h5",color:"textPrimary",className:Object(Qe.a)(c.spacing,c.alternateTitle)},"OR"),v&&i.a.createElement(at.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:v,autoHideDuration:3e3,onClose:function(){return E(!1)},message:"Login failed",action:i.a.createElement(we.a,{onClick:function(){return E(!1)},color:"secondary"},i.a.createElement(Ie.a,null))}))},ct=Object(Ne.a)((function(e){return{spacing:{marginBottom:e.spacing(4)},title:{textAlign:"center",fontWeight:500,letterSpacing:2},alternateTitle:{textAlign:"center",fontWeight:"lighter"}}}));var ot=function(e){var t,a,n=e.className,c=ct(),o=Object(l.b)(),u=Object(Ze.b)(),s=u.register,m=u.handleSubmit,d=u.setError,f=u.errors,p=Object(r.useState)(!1),g=Object(xe.a)(p,2),v=g[0],E=g[1],b=function(){var e=Object(Ke.a)(qe.a.mark((function e(t){return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.email&&t.password){e.next=2;break}return e.abrupt("return");case 2:if(t.password===t.confirm_password){e.next=5;break}return d("confirm_password",{message:"Passwords do not match"}),e.abrupt("return");case 5:X(t).then((function(e){o(nt(e.data))})).catch((function(e){409===e.response.status?d("email",{message:"Email is already taken"}):E(!0)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement("div",{className:n},i.a.createElement(Pe.a,{variant:"h5",color:"textPrimary",className:Object(Qe.a)(c.spacing,c.title)},"REGISTER"),i.a.createElement("form",{noValidate:!0,onSubmit:m(b),className:c.spacing},i.a.createElement(et.a,{variant:"outlined",label:"Email",name:"email",type:"email",inputRef:s(),className:c.spacing,fullWidth:!0,error:!!f.email,helperText:null===(t=f.email)||void 0===t?void 0:t.message}),i.a.createElement(et.a,{variant:"outlined",label:"Password",name:"password",type:"password",inputRef:s(),className:c.spacing,fullWidth:!0}),i.a.createElement(et.a,{variant:"outlined",label:"Confirm Password",name:"confirm_password",type:"password",inputRef:s(),className:c.spacing,fullWidth:!0,error:!!f.confirm_password,helperText:null===(a=f.confirm_password)||void 0===a?void 0:a.message}),i.a.createElement(tt.a,{variant:"outlined",color:"primary",fullWidth:!0,type:"submit"},"Register")),v&&i.a.createElement(at.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:v,autoHideDuration:3e3,onClose:function(){return E(!1)},message:"Registration failed",action:i.a.createElement(we.a,{onClick:function(){return E(!1)}},i.a.createElement(Ie.a,null))}))},lt=a(216),ut=Object(Ne.a)((function(e){return{container:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center"}}}));var st=function(){var e=ut();return i.a.createElement("div",{className:e.container},i.a.createElement(lt.a,null))},mt=Object(Ne.a)((function(e){return{container:{height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",paddingBottom:e.spacing(4)+48},form:{padding:"0 ".concat(e.spacing(2),"px")},fab:{position:"fixed",bottom:e.spacing(4),right:e.spacing(2),"& .MuiFab-label":{display:"flex",alignItems:"center","& svg":{marginRight:e.spacing(1)}}},close:{position:"absolute",top:e.spacing(4)-12,left:e.spacing(4)-12}}}));var dt=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.auth.isLoggedIn})),a=Object(l.c)((function(e){return e.auth.token})),n=a&&!t,c=Object(r.useState)(!1),o=Object(xe.a)(c,2),u=o[0],s=o[1],m=Object(r.useState)(n),d=Object(xe.a)(m,2),f=d[0],p=d[1],g=mt({showRegisterForm:u});return Object(r.useEffect)((function(){n&&z().then((function(t){return e(nt({user:t.data,token:a}))})).catch((function(){return localStorage.removeItem("token")})).finally((function(){return p(!1)}))})),i.a.createElement(Je,null,i.a.createElement("div",{className:g.container,style:{paddingBottom:u&&"0"}},f?i.a.createElement(st,null):u?i.a.createElement(i.a.Fragment,null,i.a.createElement(we.a,{onClick:function(){return s(!1)},className:g.close},i.a.createElement(Ie.a,null)),i.a.createElement(ot,{className:g.form})):i.a.createElement(i.a.Fragment,null,i.a.createElement(it,{className:g.form}),i.a.createElement(Se.a,{variant:"extended",color:"secondary",className:g.fab,onClick:function(){return s(!0)}},i.a.createElement(Te.a,null),"Register"))))};var ft=function(){var e=Object(l.b)(),t=Object(Ce.g)();return Object(r.useEffect)((function(){e({type:"LOGOUT"}),t.push("/")}),[e,t]),i.a.createElement(Je,{HeaderProps:{title:"Logout"}})},pt=a(226),gt=a(231),vt=a(219),Et=a(220),bt=a(221),ht=a(218),yt=a(85);var Ot=function(e){var t="string"===typeof e?n[e]:n[e.method].bind(null,e.data);if(!t)throw new Error("API Method "+(e.method||e)+" not found");var a=Object(r.useState)(!e.defaultValue),i=Object(xe.a)(a,2),c=i[0],o=i[1],l=Object(r.useState)(e.defaultValue),u=Object(xe.a)(l,2),s=u[0],m=u[1],d=Object(r.useReducer)((function(e){return e+1}),0),f=Object(xe.a)(d,2),p=f[0],g=f[1];return Object(r.useEffect)((function(){e.defaultValue&&0===p||(o(!0),t().then((function(e){m(e.data),o(!1)})).catch((function(e){console.error(e)})))}),[p]),{isLoading:c,data:s,reload:g}},jt=Object(Ne.a)((function(e){return{container:{marginBottom:e.spacing(2)},divider:{margin:"0 ".concat(e.spacing(2),"px")}}}));var Ct=function(e){var t=e.filter,a=void 0===t?"":t,n=e.style,r=e.onClick,c=jt(),o=Ot("getAllActivities"),l=o.isLoading,u=o.data;if(l)return i.a.createElement(st,null);var s=u.filter((function(e){return e.name.toLowerCase().startsWith(a.toLowerCase())}));return i.a.createElement(yt.a,{elevation:3,className:c.container,style:n},s.length>0?i.a.createElement(We.a,null,s.map((function(e,t){return i.a.createElement(i.a.Fragment,{key:e.id},i.a.createElement(He.a,{button:!0,onClick:function(){return r(e)}},i.a.createElement(Ye.a,null,e.name)),t<s.length-1&&i.a.createElement(Xe.a,{className:c.divider}))}))):i.a.createElement(We.a,null,i.a.createElement(He.a,null,i.a.createElement(Ye.a,null,"No activities found"))))},xt=Object(Ne.a)((function(e){return{form:{marginBottom:e.spacing(2)},input:{margin:"".concat(e.spacing(1),"px 0"),"&:first-child":{marginTop:0}},submitButton:{margin:"8px 0 16px 0"}}}));var wt=function(e){var t=e.onSubmit,a=xt(),n=Object(Ze.b)(),c=n.register,o=n.watch,l=n.reset,u=n.getValues,s=n.setValue,m=Object(r.useState)(),d=Object(xe.a)(m,2),f=d[0],p=d[1];return i.a.createElement("form",{noValidate:!0,className:a.form},i.a.createElement(et.a,{variant:"outlined",label:"Activity",name:"activity_name",inputRef:c(),className:a.input,fullWidth:!0,autoComplete:"off"}),i.a.createElement(Ct,{filter:o("activity_name"),style:{display:!o("activity_name")&&"none"},onClick:function(e){p(e),s("activity_name",e.name)}}),i.a.createElement(et.a,{variant:"outlined",label:"Icon",name:"icon",inputRef:c(),className:a.input,fullWidth:!0,autoComplete:"off",InputProps:o("icon")&&h[o("icon")]?{endAdornment:i.a.createElement(ht.a,{position:"end"},i.a.createElement(h[o("icon")]))}:{}}),i.a.createElement(tt.a,{href:"https://material-ui.com/components/material-icons/",target:"_blank"},"View available icons"),i.a.createElement(tt.a,{variant:"outlined",color:"primary",fullWidth:!0,onClick:function(){f&&t({icon:u("icon"),activity_id:f.id}).then(l)},className:a.submitButton},"Add"))};var St=function(e){var t=e.open,a=e.onClose;return i.a.createElement(vt.a,{open:t,onClose:a},i.a.createElement(Et.a,null,"Create Shortcut"),i.a.createElement(bt.a,null,i.a.createElement(wt,{onSubmit:function(e){return new Promise((function(t){fe(e).then((function(){t(),a()})).catch((function(e){return console.error(e)}))}))}})))},Nt=Object(Ne.a)((function(e){return{container:{marginBottom:e.spacing(2),overflowX:"scroll",display:"flex"},chip:{backgroundColor:"#4B4B57",marginRight:e.spacing(2)}}}));var kt=function(e){var t=e.onClick,a=Nt(),n=Ot("getAllShortcuts"),c=n.isLoading,o=n.data,l=n.reload,u=Object(r.useState)(!1),s=Object(xe.a)(u,2),m=s[0],d=s[1];return c?i.a.createElement(st,null):i.a.createElement("div",{className:a.container},o.map((function(e){return i.a.createElement(gt.a,{icon:e.icon&&i.a.createElement(e.icon),label:e.activity.name,onClick:function(){return t(e.activity)},onDelete:function(){return function(e){pe(e).then(l).catch((function(e){return console.error(e)}))}(e)},className:a.chip,clickable:!0,key:e.id})})),i.a.createElement(gt.a,{icon:i.a.createElement(Te.a,null),label:"Add Shortcut",onClick:function(){d(!0)},className:a.chip,clickable:!0}),i.a.createElement(St,{open:m,onClose:function(){d(!1),l()}}))};function It(e){e.preventDefault()}var At={passive:!1};function Tt(e){return e.touches?{x:e.touches[0].clientX,y:e.touches[0].clientY}:{x:e.clientX,y:e.clientY}}var _t=Object(Ne.a)((function(e){return{title:{opacity:.87},primaryInputs:{display:"flex",marginBottom:e.spacing(2)},input:{margin:"".concat(e.spacing(1),"px 0")},timeDisplay:{width:e.spacing(8),marginLeft:e.spacing(1),display:"flex",justifyContent:"center",alignItems:"center",fontSize:20},submitButton:{margin:"8px 0 16px 0"}}}));function Rt(){return function(e,t){var a=60*t*1e3;return b()(Math.round(+e/a)*a)}(b()(),5)}var Pt=function(e){var t=e.onSubmit,a=e.defaultValues,n=e.title,c=void 0===n||n,o=e.submitButton,l=void 0!==o&&o,u=_t(),s=Object(Ze.b)({defaultValues:Object(p.a)({finished_at:Rt()},a)}),m=s.register,d=s.control,f=s.watch,g=s.reset,v=s.getValues,E=s.setValue,b=s.formState,h=Object(r.useState)(!1),y=Object(xe.a)(h,2),O=y[0],j=y[1],C=function(e){var n=v("finished_at").format("YYYY-MM-DD HH:mm");t({activity_id:(null===e||void 0===e?void 0:e.id)||a.activity_id,finished_at:n}).then(g)};return Object(r.useEffect)((function(){var e=setInterval((function(){"finished_at"in b.dirtyFields||E("finished_at",Rt())}),1e3);return function(){return clearInterval(e)}})),i.a.createElement(i.a.Fragment,null,c&&i.a.createElement(Pe.a,{variant:"subtitle1",className:u.title},"Register Activity"),i.a.createElement("form",{noValidate:!0},i.a.createElement("div",{className:u.primaryInputs},i.a.createElement(et.a,{variant:"outlined",label:"Activity",name:"activity_name",inputRef:m(),className:u.input,fullWidth:!0,autoComplete:"off"}),i.a.createElement("div",{className:u.timeDisplay,onClick:function(){return j(!0)}},f("finished_at").format("HH:mm")),i.a.createElement(Ze.a,{control:d,name:"finished_at",render:function(e){var t=e.onChange,a=e.value;return i.a.createElement(pt.a,{value:a,open:O,onOpen:function(){return j(!0)},onClose:function(){return j(!1)},onChange:t,ampm:!1,style:{display:"none"}})}})),i.a.createElement(Ct,{filter:f("activity_name"),style:{display:!f("activity_name")&&"none"},onClick:C}),i.a.createElement(kt,{onClick:C}),l&&i.a.createElement(tt.a,{variant:"outlined",color:"primary",fullWidth:!0,onClick:C,className:u.submitButton},"Save")))},Dt=a(84),Lt=a(31),Vt=a(115),Bt=a.n(Vt),Mt=a(116),Wt=a.n(Mt);var Ht=function(e){var t=e.children,a=e.onDragStart,n=void 0===a?function(){}:a,c=e.onDrag,o=void 0===c?function(){}:c,l=e.onDragStop,u=void 0===l?function(){}:l,s=Object(r.useRef)(),m=Object(r.useState)(!1),d=Object(xe.a)(m,2),f=d[0],p=d[1],g=Object(r.useState)(!1),v=Object(xe.a)(g,2),E=v[0],b=v[1],h=function(e){var t=Tt(e);s.current=t,n(t),p(!0)},y=function(e){if(!E){var t=Tt(e);if(t.deltaX=t.x-s.current.x,t.deltaY=t.y-s.current.y,f){if(Math.abs(t.deltaY)>=Math.abs(t.deltaX))return void b(!0);window.addEventListener("touchmove",It,At),p(!1)}o(t),s.current=t}},O=function(){window.removeEventListener("touchmove",It,At),E&&b(!1),u()};return i.a.cloneElement(i.a.Children.only(t),{onMouseDown:h,onMouseMove:y,onMouseUp:O,onTouchStart:h,onTouchMove:y,onTouchEnd:O})},Ft=Object(Ne.a)((function(e){return{container:{display:"flex",alignItems:"center"},icon:{position:"absolute",color:"#000"}}}));var Yt=function(e){var t=e.children,a=e.swipeLeftConfig,n=e.swipeRightConfig,c=e.onSwipeRight,o=e.onSwipeLeft,l=Object(Lt.a)(),u=Ft(),s=Object(r.useRef)(),m=Object(r.useRef)(),d=Object(r.useState)({x:0,y:0}),f=Object(xe.a)(d,2),g=f[0],v=f[1],E=Object(r.useState)(),b=Object(xe.a)(E,2),h=b[0],y=b[1];a=Object(p.a)({color:l.palette.error.dark,icon:Bt.a,moveOutOfScreen:!0},a),n=Object(p.a)({color:l.palette.primary.main,icon:Wt.a,moveOutOfScreen:!1},n);var O=function(){Object(Dt.a)({targets:m.current,translateX:0,duration:200,easing:"easeOutSine",autoplay:!0,complete:function(){return v({x:0,y:0})}})},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(t){Object(Dt.a)({targets:m.current,translateX:m.current.offsetWidth*e,duration:150,easing:"easeOutSine",autoplay:!0,complete:t})}))},C=function(e){return s.current.style.backgroundColor=e},x=function(e){m.current.style.borderRadius="right"===e?"0 ".concat(l.spacing(1),"px ").concat(l.spacing(1),"px 0"):"".concat(l.spacing(1),"px 0 0 ").concat(l.spacing(1),"px")};return Object(r.useEffect)((function(){m.current.style.transform="translateX(".concat(g.x,"px)"),0!==g.x||0!==g.y?(m.current.style.transition="box-shadow 100ms linear",m.current.style.boxShadow=l.shadows[2],m.current.style.zIndex="10"):(m.current.style.boxShadow=null,m.current.style.zIndex=null),g.x<0?(x("right"),C(a.color||""),y(a.icon)):g.x>0?(x("left"),C(n.color||""),y(n.icon)):(C(null),y(null))}),[g,n,a]),i.a.createElement("div",{ref:s,className:u.container},h&&i.a.createElement(h,{className:u.icon,style:{right:g.x<0?l.spacing(2):"null",left:g.x>0?l.spacing(2):"null"}}),i.a.createElement(Ht,{onDrag:function(e){var t=g.x+e.deltaX;t>0&&!c||t<0&&!o||v(Object(p.a)(Object(p.a)({},g),{},{x:t}))},onDragStop:function(){g.x<0?function(){var e=m.current.offsetWidth;g.x<=e/-2?a.moveOutOfScreen?j(-1).then(o):(O(),o()):O()}():g.x>0&&function(){var e=m.current.offsetWidth;g.x>=e/2?n.moveOutOfScreen?(j(1),c()):(O(),c()):O()}()}},i.a.cloneElement(i.a.Children.only(t),{ref:m})))};var Xt=function(e){var t=e.open,a=e.onClose,n=e.data;return i.a.createElement(vt.a,{open:t,onClose:a},i.a.createElement(Et.a,null,"Edit Entry"),i.a.createElement(bt.a,null,i.a.createElement(Pt,{title:!1,submitButton:!0,defaultValues:{activity_name:n.activity.name,activity_id:n.activity.id,finished_at:n.finished_at},onSubmit:function(e){return new Promise((function(t){ce(Object(p.a)(Object(p.a)({},e),{},{id:n.id})).then((function(){t(),a()}))}))}})))},zt=Object(Ne.a)((function(e){return{container:{overflowX:"hidden",width:"100%"},item:{backgroundColor:e.palette.background.paper},itemInnerWrapper:{display:"flex",width:"100%"},itemPrimary:{flexGrow:1},itemSecondary:{height:56,display:"flex",flexDirection:"column",justifyContent:"center"},time:{fontSize:16}}}));function Gt(e){var t,a=e.entry,n=e.reloadList,c=zt(),o=Object(r.useState)(!1),l=Object(xe.a)(o,2),u=l[0],s=l[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement(Yt,{onSwipeLeft:function(){oe(a).then((function(){return n()})).catch((function(e){return console.error(e)}))},onSwipeRight:function(){s(!0)}},i.a.createElement(He.a,{className:c.item},i.a.createElement("div",{className:c.itemInnerWrapper},i.a.createElement("div",{className:c.itemPrimary},i.a.createElement(Ye.a,{primary:a.activity.name,secondary:null===(t=a.activity.category)||void 0===t?void 0:t.name})),i.a.createElement("div",{className:c.itemSecondary},i.a.createElement("span",{className:c.time},a.finished_at.format("HH:mm")))))),i.a.createElement(Xt,{data:a,open:u,onClose:function(){s(!1),n()}}))}var Ut=i.a.forwardRef((function(e,t){var a=e.date,n=e.defaultValue,c=e.style,o=zt(),l=Ot({method:"getPerformedActivitiesByDate",defaultValue:n,data:{date:a.format("YYYY-MM-DD")}}),u=l.isLoading,s=l.data,m=l.reload,d=Object(r.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.sort((function(e,t){return t.finished_at.unix()-e.finished_at.unix()}))}(s)}),[s]);return Object(r.useImperativeHandle)(t,(function(){return{reload:m}}),[m]),u?i.a.createElement(st,null):i.a.createElement(yt.a,{elevation:3,className:o.container,style:c},i.a.createElement(We.a,null,d.length>0?d.map((function(e,t){return i.a.createElement(Gt,{entry:e,reloadList:m,key:e.id})})):i.a.createElement(He.a,null,i.a.createElement(Ye.a,null,"No entries"))))}));var Jt=function(){var e=Object(r.useRef)();return i.a.createElement(Je,{HeaderProps:{title:"Today"}},i.a.createElement(Pt,{onSubmit:function(t){return new Promise((function(a){ie(t).then((function(){e.current.reload(),a()})).catch((function(e){console.error(e)}))}))}}),i.a.createElement(Ut,{date:b()(),ref:e}))},$t=a(229),qt=a(222),Kt=a(223),Qt=Object(Ne.a)((function(e){return{list:{marginTop:e.spacing(2)},accordionDetails:{padding:0}}}));var Zt=function(){var e=Qt(),t=Ot("getAllPerformedActivitiesByDate"),a=t.isLoading,n=t.data;return i.a.createElement(Je,{HeaderProps:{title:"All Time"}},i.a.createElement("div",{className:e.list},a?i.a.createElement(st,null):Object.keys(n).map((function(t){return t=b()(t,"YYYY-DD-MM"),i.a.createElement($t.a,{TransitionProps:{unmountOnExit:!0},key:t},i.a.createElement(qt.a,null,i.a.createElement(Pe.a,{variant:"subtitle1"},t.format("DD.MM.YYYY"))),i.a.createElement(Kt.a,{classes:{root:e.accordionDetails}},i.a.createElement(Ut,{date:t,defaultValue:n[t]})))}))))},ea=Object(Ne.a)((function(e){return{container:{marginBottom:e.spacing(2)},divider:{margin:"0 ".concat(e.spacing(2),"px")}}}));var ta=function(e){var t=e.filter,a=void 0===t?"":t,n=e.style,r=e.onClick,c=ea(),o=Ot("getAllCategories"),l=o.isLoading,u=o.data;if(l)return i.a.createElement(st,null);var s=u.filter((function(e){return e.name.toLowerCase().startsWith(a.toLowerCase())}));return i.a.createElement(yt.a,{elevation:3,className:c.container,style:n},s.length>0?i.a.createElement(We.a,null,s.map((function(e,t){return i.a.createElement(i.a.Fragment,{key:e.id},i.a.createElement(He.a,{button:!0,onClick:function(){return r(e)}},i.a.createElement(Ye.a,null,e.name)),t<s.length-1&&i.a.createElement(Xe.a,{className:c.divider}))}))):i.a.createElement(We.a,null,i.a.createElement(He.a,null,i.a.createElement(Ye.a,null,"No categories found"))))},aa=a(119);var na=function(e){var t=Object(Lt.a)();return i.a.createElement(aa.a,Object.assign({},e,{theme:function(e){return Object(p.a)(Object(p.a)({},e),{},{colors:Object(p.a)(Object(p.a)({},e.colors),{},{primary:t.palette.primary.main,primary75:t.palette.primary.main,primary50:t.palette.primary.main,primary25:t.palette.background.paper,danger:t.palette.error.main,dangerLight:t.palette.error.main,neutral0:t.palette.background.default,neutral5:t.palette.action.disabled,neutral10:t.palette.action.disabled,neutral20:t.palette.action.disabled,neutral30:t.palette.action.disabled,neutral40:t.palette.text.secondary,neutral50:t.palette.text.secondary,neutral60:t.palette.text.secondary,neutral70:t.palette.text.secondary,neutral80:t.palette.text.secondary,neutral90:t.palette.text.secondary}),spacing:Object(p.a)(Object(p.a)({},e.spacing),{},{controlHeight:t.spacing(7)})})}}))},ra=Object(Ne.a)((function(e){return{title:{opacity:.87},input:{margin:"".concat(e.spacing(1),"px 0")},submitButton:{margin:"8px 0 16px 0"}}}));var ia=function(e){var t,a=e.onSubmit,n=e.defaultValues,c=e.title,o=void 0===c||c,l=e.showAllCategories,u=void 0!==l&&l,s=e.submitText,m=void 0===s?"Create":s,d=ra(),f=Ot("getAllTags"),g=f.isLoading,v=f.data,E=Object(Ze.b)({defaultValues:n}),b=E.register,h=E.watch,y=E.reset,O=E.getValues,j=E.setValue,C=E.control,x=Object(r.useState)(null===n||void 0===n?void 0:n.category_id),w=Object(xe.a)(x,2),S=w[0],N=w[1],k=Object(r.useMemo)((function(){return null===v||void 0===v?void 0:v.map((function(e){return{label:e.name,value:e.id}}))}),[v]);return g?i.a.createElement(st,null):(n&&console.log(n),i.a.createElement(i.a.Fragment,null,o&&i.a.createElement(Pe.a,{variant:"subtitle1",className:d.title},"Create Activity"),i.a.createElement("form",{noValidate:!0},i.a.createElement(et.a,{variant:"outlined",label:"Name",name:"name",inputRef:b(),className:d.input,fullWidth:!0,autoComplete:"off"}),i.a.createElement(et.a,{variant:"outlined",label:"Category",name:"category_name",inputRef:b(),className:d.input,fullWidth:!0,autoComplete:"off"}),i.a.createElement(ta,{filter:h("category_name"),style:{display:!u&&!h("category_name")&&"none"},onClick:function(e){N(e.id),j("category_name",e.name)}}),i.a.createElement(Ze.a,{as:na,name:"tag_ids",label:"Tags",control:C,options:k,isMulti:!0,className:d.input,defaultValue:null===n||void 0===n||null===(t=n.tags)||void 0===t?void 0:t.map((function(e){return k.find((function(t){return t.value===e.id}))}))}),i.a.createElement(tt.a,{variant:"outlined",color:"primary",fullWidth:!0,onClick:function(){var e,t=O();t.name&&S&&(t.tag_ids=null===(e=t.tag_ids)||void 0===e?void 0:e.map((function(e){return e.value})),a(Object(p.a)(Object(p.a)({},t),{},{category_id:S})).then(y))},className:d.submitButton},m))))},ca=a(2),oa=Object(Ne.a)((function(e){return{container:{marginTop:e.spacing(2),padding:0,overflow:"hidden"}}}));function la(e){var t=e.data,a=e.reloadList,n=e.apiDelete,c=e.EditDialog,o=e.ListItem,l=Object(r.useState)(!1),u=Object(xe.a)(l,2),s=u[0],m=u[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement(Yt,{onSwipeLeft:function(){n({id:t.id}).then(a).catch(console.error)},onSwipeRight:function(){m(!0)},key:t.id},i.a.createElement(o,{data:t})),i.a.createElement(c,{open:s,onClose:function(){m(!1),a()},data:t}))}var ua=i.a.forwardRef((function(e,t){var a=e.APIMethods,c=e.EditDialog,o=e.ListItem,l=oa(),u=Ot(a.get),s=u.isLoading,m=u.data,d=u.reload;return Object(r.useImperativeHandle)(t,(function(){return{reload:d}}),[d]),s?i.a.createElement(st,null):(m.sort((function(e,t){return e.name.localeCompare(t.name)})),i.a.createElement(yt.a,{className:l.container},i.a.createElement(We.a,null,m.length>0?m.map((function(e){return i.a.createElement(la,{key:e.id,data:e,reloadList:d,apiDelete:n[a.delete],EditDialog:c,ListItem:o})})):i.a.createElement(He.a,null,i.a.createElement(Ye.a,null,"No entries")))))}));var sa=function(e){var t=e.open,a=e.onClose,n=e.data;return i.a.createElement(vt.a,{open:t,onClose:a},i.a.createElement(Et.a,null,"Edit Activity"),i.a.createElement(bt.a,null,i.a.createElement(ia,{title:!1,showAllCategories:!0,submitText:"Save",defaultValues:Object(p.a)(Object(p.a)({},n),{},{category_id:n.category.id,category_name:n.category.name}),onSubmit:function(e){return new Promise((function(t){ee(Object(p.a)(Object(p.a)({},e),{},{id:n.id})).then((function(){t(),a()}))}))}})))},ma=Object(Ne.a)((function(e){return{listItem:{display:"flex",flexDirection:"column",alignItems:"stretch",backgroundColor:e.palette.background.paper},main:{display:"flex",justifyContent:"space-between"},secondary:{fontSize:14,lineHeight:2,opacity:.87},tags:{marginTop:e.spacing(1)},chip:{marginRight:e.spacing(1),"&:last-child":{margin:0}}}}));var da=i.a.forwardRef((function(e,t){var a=ma();return i.a.createElement(ua,{ref:t,APIMethods:{get:"getAllActivitiesDetailed",delete:"deleteActivity"},EditDialog:sa,ListItem:i.a.forwardRef((function(e,t){var n=e.data,r=Object(ca.a)(e,["data"]);return i.a.createElement(He.a,Object.assign({ref:t,className:a.listItem},r),i.a.createElement("div",{className:a.main},i.a.createElement(Pe.a,{variant:"subtitle1"},n.name),i.a.createElement("span",{className:a.secondary},n.category.name)),i.a.createElement("div",{className:a.main},i.a.createElement("div",{className:a.stats},Math.floor(n.total_duration/1e3/3600),"h"),i.a.createElement("div",{className:a.tags},n.tags.map((function(e){return i.a.createElement(gt.a,{variant:"outlined",label:e.name,size:"small",className:a.chip,key:e.id})})))))}))})}));var fa=function(){var e=Object(r.useRef)();return i.a.createElement(Je,{HeaderProps:{title:"Activities"}},i.a.createElement(ia,{onSubmit:function(t){return new Promise((function(a){Z(t).then((function(){e.current.reload(),a()})).catch((function(e){return console.error(e)}))}))}}),i.a.createElement(da,{ref:e}))},pa=Object(Ne.a)((function(e){return{title:{opacity:.87},input:{margin:"".concat(e.spacing(1),"px 0")},submitButton:{margin:"8px 0 16px 0"}}}));var ga=function(e){var t,a=e.onSubmit,n=e.defaultValues,c=e.title,o=void 0===c||c,l=e.submitText,u=void 0===l?"Create":l,s=pa(),m=Ot("getAllTags"),d=m.isLoading,f=m.data,p=Object(Ze.b)({defaultValues:n}),g=p.register,v=p.reset,E=p.getValues,b=p.control,h=Object(r.useMemo)((function(){return null===f||void 0===f?void 0:f.map((function(e){return{label:e.name,value:e.id}}))}),[f]);return d?i.a.createElement(st,null):i.a.createElement(i.a.Fragment,null,o&&i.a.createElement(Pe.a,{variant:"subtitle1",className:s.title},"Create Category"),i.a.createElement("form",{noValidate:!0},i.a.createElement(et.a,{variant:"outlined",label:"Name",name:"name",inputRef:g(),className:s.input,fullWidth:!0,autoComplete:"off"}),i.a.createElement(Ze.a,{as:na,name:"tag_ids",label:"Tags",control:b,options:h,isMulti:!0,className:s.input,defaultValue:null===n||void 0===n||null===(t=n.tags)||void 0===t?void 0:t.map((function(e){return h.find((function(t){return t.value===e.id}))}))}),i.a.createElement(tt.a,{variant:"outlined",color:"primary",fullWidth:!0,onClick:function(){var e,t=E();t.name&&(t.tag_ids=null===(e=t.tag_ids)||void 0===e?void 0:e.map((function(e){return e.value})),a(t).then(v))},className:s.submitButton},u)))};var va=function(e){var t=e.open,a=e.onClose,n=e.data;return i.a.createElement(vt.a,{open:t,onClose:a},i.a.createElement(Et.a,null,"Edit Category"),i.a.createElement(bt.a,null,i.a.createElement(ga,{title:!1,defaultValues:n,submitText:"Save",onSubmit:function(e){return new Promise((function(t){J(Object(p.a)(Object(p.a)({},e),{},{id:n.id})).then((function(){t(),a()}))}))}})))},Ea=Object(Ne.a)((function(e){return{listItem:{backgroundColor:e.palette.background.paper,display:"flex",flexDirection:"column",alignItems:"stretch"},tags:{marginTop:e.spacing(1)},chip:{marginRight:e.spacing(1),"&:last-child":{margin:0}}}}));var ba=i.a.forwardRef((function(e,t){var a=Ea();return i.a.createElement(ua,{ref:t,APIMethods:{get:"getAllCategories",delete:"deleteCategory"},EditDialog:va,ListItem:i.a.forwardRef((function(e,t){var n=e.data,r=Object(ca.a)(e,["data"]);return i.a.createElement(He.a,Object.assign({ref:t,className:a.listItem},r),i.a.createElement(Ye.a,null,n.name),i.a.createElement("div",{className:a.tags},n.tags.map((function(e){return i.a.createElement(gt.a,{variant:"outlined",label:e.name,size:"small",className:a.chip,key:e.id})}))))}))})}));var ha=function(){var e=Object(r.useRef)();return i.a.createElement(Je,{HeaderProps:{title:"Categories"}},i.a.createElement(ga,{onSubmit:function(t){return new Promise((function(a){U(t).then((function(){e.current.reload(),a()})).catch((function(e){return console.error(e)}))}))}}),i.a.createElement(ba,{ref:e}))},ya=Object(Ne.a)((function(e){return{title:{opacity:.87},input:{margin:"".concat(e.spacing(1),"px 0")},submitButton:{margin:"8px 0 16px 0"}}}));var Oa=function(e){var t=e.onSubmit,a=e.defaultValues,n=e.title,r=void 0===n||n,c=e.submitText,o=void 0===c?"Create":c,l=ya(),u=Object(Ze.b)({defaultValues:a}),s=u.register,m=u.reset,d=u.getValues;return i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(Pe.a,{variant:"subtitle1",className:l.title},"Create Tag"),i.a.createElement("form",{noValidate:!0},i.a.createElement(et.a,{variant:"outlined",label:"Name",name:"name",inputRef:s(),className:l.input,fullWidth:!0,autoComplete:"off"}),i.a.createElement(tt.a,{variant:"outlined",color:"primary",fullWidth:!0,onClick:function(){var e=d();e.name&&t(e).then(m)},className:l.submitButton},o)))};var ja=function(e){var t=e.open,a=e.onClose,n=e.data;return i.a.createElement(vt.a,{open:t,onClose:a},i.a.createElement(Et.a,null,"Edit Tag"),i.a.createElement(bt.a,null,i.a.createElement(Oa,{title:!1,defaultValues:n,submitText:"Save",onSubmit:function(e){return new Promise((function(t){se(Object(p.a)(Object(p.a)({},e),{},{id:n.id})).then((function(){t(),a()}))}))}})))},Ca=Object(Ne.a)((function(e){return{listItem:{backgroundColor:e.palette.background.paper}}}));var xa=i.a.forwardRef((function(e,t){var a=Ca();return i.a.createElement(ua,{ref:t,APIMethods:{get:"getAllTags",delete:"deleteTag"},EditDialog:ja,ListItem:i.a.forwardRef((function(e,t){var n=e.data,r=Object(ca.a)(e,["data"]);return i.a.createElement(He.a,Object.assign({ref:t,className:a.listItem},r),i.a.createElement(Ye.a,null,n.name))}))})}));var wa=function(){var e=Object(r.useRef)();return i.a.createElement(Je,{HeaderProps:{title:"TagsPage"}},i.a.createElement(Oa,{onSubmit:function(t){return new Promise((function(a){ue(t).then((function(){e.current.reload(),a()})).catch((function(e){return console.error(e)}))}))}}),i.a.createElement(xa,{ref:e}))};var Sa=function(){return i.a.createElement(Je,{HeaderProps:{title:"Analysis"}})};var Na=function(){var e=Object(Ce.h)().id,t=Ot({method:"getActivity",data:e}),a=t.isLoading,n=t.data;return a?i.a.createElement(Je,null,i.a.createElement(st,null)):(console.log(n),i.a.createElement(Je,{HeaderProps:{title:n.name}}))};var ka=function(){return Object(l.c)((function(e){return e.auth.isLoggedIn}))?i.a.createElement(je.a,{basename:"/app"},i.a.createElement(Ce.d,null,i.a.createElement(Ce.b,{path:"/profile"},i.a.createElement(Jt,null)),i.a.createElement(Ce.b,{path:"/logout"},i.a.createElement(ft,null)),i.a.createElement(Ce.b,{path:"/today"},i.a.createElement(Jt,null)),i.a.createElement(Ce.b,{path:"/all-time"},i.a.createElement(Zt,null)),i.a.createElement(Ce.b,{path:"/activities"},i.a.createElement(fa,null)),i.a.createElement(Ce.b,{path:"/categories"},i.a.createElement(ha,null)),i.a.createElement(Ce.b,{path:"/tags"},i.a.createElement(wa,null)),i.a.createElement(Ce.b,{path:"/analysis"},i.a.createElement(Sa,null)),i.a.createElement(Ce.b,{path:"/activity/:id"},i.a.createElement(Na,null)),i.a.createElement(Ce.b,{path:"/"},i.a.createElement(Ce.a,{to:"/today"})))):i.a.createElement(dt,null)};var Ia=function(){return i.a.createElement("div",null,i.a.createElement(Oe.a,null),i.a.createElement(ka,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(171);var Aa=Object(u.a)({palette:{theme:"dark",type:"dark",background:{default:"#282833",paper:"#333340"},primary:{main:"#BB86FC",variant:"#3700B3"},secondary:{main:"#03DAC5"},error:{main:"#CF6679"}}});o.a.render(i.a.createElement(l.a,{store:ye},i.a.createElement(s.a,{theme:Aa},i.a.createElement(m.a,{utils:d.a},i.a.createElement(Ia,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[140,1,2]]]);
//# sourceMappingURL=main.16886f31.chunk.js.map